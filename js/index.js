var message=[
  "Make yourself familiar with the insturments by hovering over them after hovering click on next button ",
  "Click on Oxalic Acid and Measure 10 ML Oxalic Acid Solution",
  "Click on Measuring Cylinder",
  "Again Click on Oxalic Acid and Measure 10 ML Oxalic Acid Solution",
  "Again Click on Measuring Cylinder",
  "Again Click on Oxalic Acid and Measure 10 ML Oxalic Acid Solution",
  "Again Click on Measuring Cylinder",
  "Click on Next button",
  "Click on Phenolphthalein Indicator and add few drop into 10ML oxalic acid solution",
  "Again Click on Phenolphthalein Indicator and add few drop into 10ML oxalic acid solution",
  "Again Click on Phenolphthalein Indicator and add few drop into 10ML oxalic acid solution",
  "Click on Next button",
  "Click on the S1 Conical Flask",
  "Click on the knob until the  oxalic acid solution colour turn into pink",
  "Click on the taitrated pink conaical Flask",
  " Again click on the  next S2 Conical Flask",
  " Again click on the knob until the oxalic acid solution colour turn into pink",
  "Click on the taitrated pink conaical Flask",
  " Again click on the  next S3 Conical Flask",
  " Again click on the knob until the oxalic acid solution colour turn into pink",
  "Click on the taitrated pink conaical Flask",
  "Click on the next button",
  //tatitration of five flask acetic acid
  "Click on Phenolphthalein Indicator for preparing the  unknown set of acetic acid stock solution",
  "Again Click on Phenolphthalein Indicator for preparing the unknown set of acetic acid stock solution",
  "Again Click on Phenolphthalein Indicator for preparing the unknown set of acetic acid stock solution",
  "Again Click on Phenolphthalein Indicator for preparing the unknown set of acetic acidstock solution",
  "Again Click on Phenolphthalein Indicator for preparing the unknown set of acetic acid stock solution",
  "Click on the next button",
  "Click on the U1 Conical Flask",
  "Click on the knob until the  acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical Flask",
  // "Click on the taitrated pink conaical plask",
  " Again click on the  U2 Conical Flask",
  " Again click on the knob until the acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical Flask",
  // "Click on the taitrated pink conaical plask",
  " Again click on the U3 Conical Flask",
  " Again click on the knob until the acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical Flask",
  // "Click on the taitrated pink conaical plask",
  " Again click on the  U4 Conical Flask",
  " Again click on the knob until the acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical Flask",
  // "Click on the taitrated pink conaical plask",
  " Again click on the U5 Conical Flask",
  " Again click on the knob until the acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical plask",
  // "Click on the taitrated pink conaical plask",
  "Click on the next button",
  // weing charcole message
  "Turn on the Weingmachine for weighing 1gm Charcoal",
  "Click on the empty  Petri dish",
  "click on Tare button",
  "Click on Spatula",
  "Again click on Spatula",
  "Click on the weighing 1gm charcoal petri disk and pour into the acetic acid solution",
  "Again Click on the empty Petri dish",
  "Again click on Tare button",
  "Again Click on Spatula",
  "Again Click on Spatula",
  "Again click on the weighing 1gm charcoal petri disk and pour into the acetic acid solution",
  "Again Click on the empty Petri dish",
  "Again click on Tare button",
  "Again Click on Spatula",
  "Again Click on Spatula",
  "Again click on the weighing 1gm charcoal petri disk and pour into the acetic acid solution",
  "Again Click on the empty Petri dish",
  "Again click on Tare button",
  "Again Click on Spatula",
  "Again Click on Spatula",
  "Again click on the weighing 1gm charcoal petri disk and pour into the acetic acid solution",
  "Again Click on the empty Petri dish",
  "Again click on Tare button",
  "Again Click on Spatula",
  "Again Click on Spatula",
  "Again click on the weighing 1gm charcoal petri disk and pour into the acetic acid solution",
  "Click on the next button",
  "Turn on the main switch",
  " turn on the power button of the magnatic machine",
  "Click on the conical flask ",
  "Click on the next conical flask ",
  "Click on the next conical flask ",
  "Click on the next conical flask ",
  "Click on the next conical flask ",
  "Click on the magnet",
  "Click on the heat switch for setting the temprature",
  "Click on the speed switch for mixing the solution",
  "The solution of acetic acid and charcoal is ready and Click on the next button ",
  // filterated sollution message
  "Click on the K1 conical flask solution for filtering the charcol solution",
  "Click on the filtered acetic acid solution",
  "Click on the  next K2 conical flask solution for filtering the charcoal solution",
  "Click on the filtered acetic acid solution",
  "Click on the  next K3 conical flask solution for filtering the charcoal solution",
  "Click on the filtered acetic acid solution",
  "Click on the  next K4 conical flask solution for filtering the charcoal solution",
  "Click on the filtered acetic acid solution",
  "Click on the  next K5 conical flask solution for filtering the charcoal solution",
  "Click on the filtered acetic acid solution",
  "Click on the next button",
  "Click on the  K1 Conical Flask",
  "Click on the knob until the  acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical plask",
  " Again click on the  next K2 Conical Flask",
  " Again click on the knob until the acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical plask",
  " Again click on the  next K3 Conical Flask",
  " Again click on the knob until the acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical plask",
  " Again click on the  next K4 Conical Flask",
  " Again click on the knob until the acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical plask",
  " Again click on the  next K5 Conical Flask",
  " Again click on the knob until the acetic acid solution colour turn into pink",
  "Click on the taitrated pink conaical plask",
  "click on the next button for filling the final taitration table",
  "Analysis the tables and fill the final value and click on check button for checking your final answer ",
  "Now values are filled and you pratical has been completly succesfull.",
  
 
  ]
  
  var hmessage=[
    "अगले बटन पर क्लिक करने के बाद उन पर मंडराते हुए उपकरणों से खुद को परिचित कराएं",
    "ऑक्सालिक एसिड पर क्लिक करें और दस एमएल ऑक्सालिक एसिड समाधान मापें",
    "मापने वाले सिलेंडर पर क्लिक करें",
    "फिर से ऑक्सालिक एसिड पर क्लिक करें और 10 एमएल ऑक्सालिक एसिड घोल मापें",
    "फिर से मापने वाले सिलेंडर पर क्लिक करें",
    "फिर से ऑक्सालिक एसिड पर क्लिक करें और 10 एमएल ऑक्सालिक एसिड घोल मापें",
    "फिर से मापने वाले सिलेंडर पर क्लिक करें",
    "अगला बटन पर क्लिक करें",
    "फिनोलफथेलिन संकेतक पर क्लिक करें और 10 एमएल ऑक्सालिक एसिड घोल में कुछ बूंदें डालें",
    "फिर से फेनोल्फथेलिन संकेतक पर क्लिक करें और 10 एमएल ऑक्सालिक एसिड घोल में कुछ बूंदें डालें",
    "फिर से फेनोल्फथेलिन संकेतक पर क्लिक करें और 10 एमएल ऑक्सालिक एसिड घोल में कुछ बूंदें डालें",
    "अगला बटन पर क्लिक करें",
    "S1 शंक्वाकार फ्लास्क पर क्लिक करें",
    "घुंडी पर तब तक क्लिक करें जब तक ऑक्सालिक एसिड घोल का रंग गुलाबी न हो जाए",
    "टैट्रेटेड गुलाबी शंक्वाकार फ्लास्क पर क्लिक करें",
    "फिर से अगले S2 शंक्वाकार फ्लास्क पर क्लिक करें",
    "फिर से नॉब पर तब तक क्लिक करें जब तक ऑक्सालिक एसिड घोल का रंग गुलाबी न हो जाए",
    "टैट्रेटेड गुलाबी शंक्वाकार फ्लास्क पर क्लिक करें",
    "फिर से अगले S3 शंक्वाकार फ्लास्क पर क्लिक करें",
    "फिर से नॉब पर तब तक क्लिक करें जब तक ऑक्सालिक एसिड घोल का रंग गुलाबी न हो जाए",
    "टैट्रेटेड गुलाबी शंक्वाकार फ्लास्क पर क्लिक करें",
    "अगले बटन पर क्लिक करें",
    //tatitration of five flask acetic acid
    "एसिटिक एसिड स्टॉक समाधान के अज्ञात सेट को तैयार करने के लिए फेनोल्फथेलिन संकेतक पर क्लिक करें",
  "एसिटिक एसिड स्टॉक समाधान के अज्ञात सेट को तैयार करने के लिए फिर से फेनोल्फथेलिन संकेतक पर क्लिक करें",
  "एसिटिक एसिड स्टॉक समाधान के अज्ञात सेट को तैयार करने के लिए फिर से फेनोल्फथेलिन संकेतक पर क्लिक करें",
  "एसिटिक एसिडस्टॉक समाधान के अज्ञात सेट को तैयार करने के लिए फिर से फेनोल्फथेलिन संकेतक पर क्लिक करें",
  "एसिटिक एसिड स्टॉक समाधान के अज्ञात सेट को तैयार करने के लिए फिर से फेनोल्फथेलिन संकेतक पर क्लिक करें",
  "अगले बटन पर क्लिक करें",
  "U1 शंक्वाकार फ्लास्क पर क्लिक करें",
  "घुंडी पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार फ्लास्क पर क्लिक करें",
  // "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "फिर से U2 शंक्वाकार फ्लास्क पर क्लिक करें",
  "फिर से नॉब पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार फ्लास्क पर क्लिक करें",
  // "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "फिर से U3 शंक्वाकार फ्लास्क पर क्लिक करें",
  "फिर से नॉब पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार फ्लास्क पर क्लिक करें",
  // "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "फिर से U4 शंक्वाकार फ्लास्क पर क्लिक करें",
  "फिर से नॉब पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार फ्लास्क पर क्लिक करें",
  // "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "फिर से U5 शंक्वाकार फ्लास्क पर क्लिक करें",
  "फिर से नॉब पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  // "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "अगले बटन पर क्लिक करें",
   // weing charcole message
   "1 ग्राम चारकोल तोलने के लिए वेइंग मशीन चालू करें",
  "खाली पेट्री डिश पर क्लिक करें",
  "टायर बटन पर क्लिक करें",
  "स्पैटुला पर क्लिक करें",
  "फिर से स्पैटुला पर क्लिक करें",
  "1 ग्राम वजन वाली चारकोल पेट्री डिस्क पर क्लिक करें और एसिटिक एसिड घोल में डालें",
  "फिर से खाली पेट्री डिश पर क्लिक करें",
  "फिर से तारे बटन पर क्लिक करें",
  "फिर से स्पैटुला पर क्लिक करें",
  "फिर से स्पैटुला पर क्लिक करें",
  "फिर से 1 ग्राम वजन वाली चारकोल पेट्री डिस्क पर क्लिक करें और एसिटिक एसिड घोल में डालें",
  "फिर से खाली पेट्री डिश पर क्लिक करें",
  "फिर से तारे बटन पर क्लिक करें",
  "फिर से स्पैटुला पर क्लिक करें",
  "फिर से स्पैटुला पर क्लिक करें",
  "फिर से 1 ग्राम वजन वाली चारकोल पेट्री डिस्क पर क्लिक करें और एसिटिक एसिड घोल में डालें",
  "फिर से खाली पेट्री डिश पर क्लिक करें",
  "फिर से तारे बटन पर क्लिक करें",
  "फिर से स्पैटुला पर क्लिक करें",
  "फिर से स्पैटुला पर क्लिक करें",
  "फिर से 1 ग्राम वजन वाली चारकोल पेट्री डिस्क पर क्लिक करें और एसिटिक एसिड घोल में डालें",
  "फिर से खाली पेट्री डिश पर क्लिक करें",
  "फिर से तारे बटन पर क्लिक करें",
  "फिर से स्पैटुला पर क्लिक करें",
  "फिर से स्पैटुला पर क्लिक करें",
  "फिर से 1 ग्राम वजन वाली चारकोल पेट्री डिस्क पर क्लिक करें और एसिटिक एसिड घोल में डालें",
  "अगले बटन पर क्लिक करें",
  "मुख्य स्विच चालू करें",
  "मैग्नेटिक मशीन का पावर बटन चालू करें",
  "शंक्वाकार फ्लास्क पर क्लिक करें",
  "अगले शंक्वाकार फ्लास्क पर क्लिक करें",
  "अगले शंक्वाकार फ्लास्क पर क्लिक करें",
  "अगले शंक्वाकार फ्लास्क पर क्लिक करें",
  "अगले शंक्वाकार फ्लास्क पर क्लिक करें",
  "चुंबक पर क्लिक करें",
  "तापमान सेट करने के लिए हीट स्विच पर क्लिक करें",
  "समाधान मिलाने के लिए स्पीड स्विच पर क्लिक करें",
  "एसिटिक एसिड और चारकोल का घोल तैयार है और अगले बटन पर क्लिक करें",
   // filterated sollution message
   "चारकोल घोल को छानने के लिए K1 शंक्वाकार फ्लास्क घोल पर क्लिक करें",
  "फ़िल्टर किए गए एसिटिक एसिड समाधान पर क्लिक करें",
  "चारकोल घोल को छानने के लिए अगले K2 शंक्वाकार फ्लास्क घोल पर क्लिक करें",
  "फ़िल्टर किए गए एसिटिक एसिड समाधान पर क्लिक करें",
  "चारकोल घोल को छानने के लिए अगले K3 शंक्वाकार फ्लास्क घोल पर क्लिक करें",
  "फ़िल्टर किए गए एसिटिक एसिड समाधान पर क्लिक करें",
  "चारकोल घोल को छानने के लिए अगले K4 शंक्वाकार फ्लास्क घोल पर क्लिक करें",
  "फ़िल्टर किए गए एसिटिक एसिड समाधान पर क्लिक करें",
  "चारकोल घोल को छानने के लिए अगले K5 शंक्वाकार फ्लास्क घोल पर क्लिक करें",
  "फ़िल्टर किए गए एसिटिक एसिड समाधान पर क्लिक करें",
  "अगले बटन पर क्लिक करें",
  "K1 शंक्वाकार फ्लास्क पर क्लिक करें",
  "घुंडी पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "फिर से अगले K2 शंक्वाकार फ्लास्क पर क्लिक करें",
  "फिर से नॉब पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "फिर से अगले K3 शंक्वाकार फ्लास्क पर क्लिक करें",
  "फिर से नॉब पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "फिर से अगले K4 शंक्वाकार फ्लास्क पर क्लिक करें",
  "फिर से नॉब पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "फिर से अगले K5 शंक्वाकार फ्लास्क पर क्लिक करें",
  "फिर से नॉब पर तब तक क्लिक करें जब तक कि एसिटिक एसिड घोल का रंग गुलाबी न हो जाए",
  "टैट्रेटेड गुलाबी शंक्वाकार प्लास्क पर क्लिक करें",
  "अंतिम टैट्रेशन तालिका भरने के लिए अगले बटन पर क्लिक करें",
    
  ]
  
  var fillcharcoal=document.querySelector("#fillcharcoal")
  var mes=document.querySelector("#update")
  var lang
  var mes1
  messcounter = 0
  var hindibtn = document.querySelector("#hindi")
  var engbtn = document.querySelector("#eng")
  var headertext = document.querySelector("#headertext")
  var langselector = document.querySelector("#langselector")
  

  setTimeout(() => {
    update;
    s=0;
  },100);
  
  function hindi1(){
      console.log(lang)
      lang="hindi"
      //headertext.innerText="'एसिटिक' एसिड के पृथक्करण स्थिरांक को निर्धारित करने के लिए विद्युत चालकता का मापन"
      langselector.style.visibility="hidden"
      update()
  }
  
  function eng11(){
      console.log(lang)
      lang="eng"
      //headertext.innerText="Measurement of Electrical conductance to determine dissociation constant of 'Acetic' acid"
      langselector.style.visibility="hidden"
      update() 
  }
  
  
  
  function speech1(){
   speechSynthesis.cancel()
      if(lang=="hindi"){
          mes1=hmessage[messcounter-1]
          console.log(mes1)
          setTimeout(function(){ 
            //mes1=hmessage[messcounter]
            const utterance = new SpeechSynthesisUtterance(mes1);
            utterance.lang = 'hi-HI';
            utterance.pitch=1;
            utterance.rate=1;
            utterance.volume=1;
            speechSynthesis.speak(utterance);
        },500)
           
        
      }
      else if(lang=="eng"){
          mes1=message[messcounter-1]
          console.log(mes1)
          setTimeout(function(){ 
            //mes1=hmessage[messcounter]
            const utterance = new SpeechSynthesisUtterance(mes1);
            utterance.lang = 'en-EN';
            utterance.pitch=1;
            utterance.rate=1;
            utterance.volume=1;
            speechSynthesis.speak(utterance);
        },500)
      }
     
  }
 
  function update(){
      console.log(message[messcounter])
      if(lang=="hindi"){
          mes.innerText=hmessage[messcounter]
      }
      else if(lang=="eng"){
          mes.innerText=message[messcounter]
      }
      //mes.innerText=hmessage[messcounter]
      messcounter+=1
          speech1()
  }
  var charcole3=document.querySelector("#charcole3")
var meg=document.querySelector("#magnatic")
  var p1=document.querySelector("#p1")
  var p2=document.querySelector("#p2")
  var p3=document.querySelector("#p3")
  var p4=document.querySelector("#p4")
  var p5=document.querySelector("#p5")
var flask1=document.querySelector("#flask1")
var pag=0;
function nextpage(){
  if(pag==0){
    update()

    weingimage.style.visibility="hidden"
    emptyconicalflask.style.visibility="hidden"
    emptyroundflsk.style.visibility="hidden"
    roundflask11.style.visibility="hidden"
    roundflask22.style.visibility="hidden"
    aceticacidimage.style.visibility="hidden"
    buretimage.style.visibility="hidden"
    filterstand.style.visibility="hidden"
    masurcylenderimage.style.visibility="hidden"
    spertulaimage.style.visibility="hidden"
    emptypatrydiskimage.style.visibility="hidden"
    pertydiskimage.style.visibility="hidden"
    petrydiskchar.style.visibility="hidden"
    kippiimage.style.visibility="hidden"
    activatorbottelimage.style.visibility="hidden"
    activatordroperimage.style.visibility="hidden"
   
    
   weingimg.style.visibility="hidden"
    conicalflaskimg.style.visibility="hidden"
    roundflaskimg.style.visibility="hidden"
    roundflask1.style.visibility="hidden"
    roundflask2.style.visibility="hidden"
    aceticacideimg.style.visibility="hidden"
    buretimag.style.visibility="hidden"
    fiterstandimg.style.visibility="hidden"
    mesurimg.style.visibility="hidden"
    sperchulaimg.style.visibility="hidden"
    emptypatrydiskimg.style.visibility="hidden"
    activechr.style.visibility="hidden"
    kippiimg.style.visibility="hidden"
    indicatorimg.style.visibility="hidden"
   

  
  
    flask1.style.visibility="visible"
    aceticccbeaker.style.visibility="visible"
    conicaflask2.style.visibility="visible"
    conicaflask1.style.visibility="visible"
    flask22.style.visibility="visible"
    conicaflask3.style.visibility="visible"
   
    activatordeoper.style.visibility="visible"
    activaterbottel.style.visibility="visible"
   
    masurcylender.style.visibility="visible"
    // back.style.visibility="hidden"
    ss1.style.visibility="visible"
    ss2.style.visibility="visible"
    ss3.style.visibility="visible"
    o.style.visibility="visible"
    s=1;
    
  }

  else if(pag==1){
    update()
    
  
    sol2.style.transitionDuration="0s"
    sol2.style.visibility="hidden"
    aceticccbeaker.style.visibility="hidden"
    conicaflask2.style.visibility="hidden"
    conicaflask1.style.visibility="hidden"
    flask22.style.visibility="hidden"
    conicaflask3.style.visibility="hidden"
    
    activatordeoper.style.visibility="hidden"
    activaterbottel.style.visibility="hidden"
   
    masurcylender.style.transitionDuration="0s"
    masurcylender.style.visibility="hidden"
    f1sol.style.visibility="hidden"
    f2sol.style.visibility="hidden"
    f3sol.style.visibility="hidden"


    vflk1.style.visibility="visible"
    vflk2.style.visibility="visible"
    vflk3.style.visibility="visible"
   
    activaterdroper.style.visibility="visible"
    act12.style.visibility="visible"
    s1.style.visibility="visible"/*activater*/
    s2.style.visibility="visible"
    s3.style.visibility="visible"
    ss1.style.visibility="hidden"
    ss2.style.visibility="hidden"
    ss3.style.visibility="hidden"
    o.style.visibility="hidden"
    f=0;
  }
  else if(pag==2){
    update()
    k=0;
    
    vflk1.style.visibility="hidden"
    vflk2.style.visibility="hidden"
    vflk3.style.visibility="hidden"
    activaterdroper.style.visibility="hidden"
    activaterdroper.style.transitionDuration="0s"
    act12.style.transitionDuration="0s"
    act12.style.visibility="hidden"

    brstand.style.visibility="visible"
    orgflsk.style.visibility="visible"
    flask2.style.visibility="visible"
    flaskk3.style.visibility="visible"
    knob.style.visibility="visible"
    s1.style.visibility="hidden"/*tai3*/
    s2.style.visibility="hidden"
    s3.style.visibility="hidden"
    h1.style.visibility="visible"
    h2.style.visibility="visible"
    h3.style.visibility="visible"
    

    new1.style.visibility="visible"
    pflask2.style.visibility="visible"
    pflask3.style.visibility="visible"
    table.style.visibility="visible"
    
    tableh1.style.visibility="visible"
    
    

    
   
  }
  else if(pag==3){
    update()
   q=0;
   orgflsk.style.transitionDuration="0s"
   flask2.style.transitionDuration="0s"
   flaskk3.style.transitionDuration="0s"
    brstand.style.visibility="hidden"
    orgflsk.style.visibility="hidden"
    flask2.style.visibility="hidden"
    flaskk3.style.visibility="hidden"
    knob.style.visibility="hidden"
    pinkk1.style.visibility="hidden"
    pinkk2.style.visibility="hidden"
    pinkk3.style.visibility="hidden"
    pinkk1.style.transitionDuration="0s"
    pinkk2.style.transitionDuration="0s"
    pinkk3.style.transitionDuration="0s"
    table.style.visibility="hidden"
    tableh1.style.visibility="hidden"

    volflask1.style.visibility="visible"
    volflask2.style.visibility="visible"
    volflask3.style.visibility="visible"
    volflask4.style.visibility="visible"
    volflask5.style.visibility="visible"
    activater.style.visibility="visible"
    activaterdroper55f.style.visibility="visible"
    h1.style.visibility="hidden"/*act5*/
    h2.style.visibility="hidden"
    h3.style.visibility="hidden"
    u1.style.visibility="visible"
    u2.style.visibility="visible"
    u3.style.visibility="visible"
    u4.style.visibility="visible"
    u5.style.visibility="visible"
   
  }
  else if(pag==4){
    update()
   p=0;
    volflask1.style.visibility="hidden"
    volflask2.style.visibility="hidden"
    volflask3.style.visibility="hidden"
    volflask4.style.visibility="hidden"
    volflask5.style.visibility="hidden"

    volflask1.style.transitionDuration="0s"
    volflask2.style.transitionDuration="0s"
    volflask3.style.transitionDuration="0s"
    volflask4.style.transitionDuration="0s"
    volflask5.style.transitionDuration="0s"
    activater.style.transitionDuration="0s"
    activater.style.visibility="hidden"
    activaterdroper55f.style.transitionDuration="0s"
    activaterdroper55f.style.visibility="hidden"

    brstand5f.style.visibility="visible"
    f1.style.visibility="visible"
    f2.style.visibility="visible"
    f3.style.visibility="visible"
    f4.style.visibility="visible"
    aq5v.style.visibility="visible"
    knob5f.style.visibility="visible"
    // droptaitration.style.visibility="visible"
    p1.style.visibility="visible"
    p2.style.visibility="visible"
    p3.style.visibility="visible"
    p4.style.visibility="visible"
    p5.style.visibility="visible"
    table2.style.visibility="visible"
    headtb2.style.visibility="visible"
    uu1.style.visibility="visible"/*tai5*/
    uu2.style.visibility="visible"
    uu3.style.visibility="visible"
    uu4.style.visibility="visible"
    uu5.style.visibility="visible"
    u1.style.visibility="hidden"
    u2.style.visibility="hidden"
    u3.style.visibility="hidden"
    u4.style.visibility="hidden"
    u5.style.visibility="hidden"
    
   
  }
  else if(pag==5){
    update()
   m=1;
   

    brstand5f.style.visibility="hidden"
    f1.style.visibility="hidden"
    f2.style.visibility="hidden"
    f3.style.visibility="hidden"
    f4.style.visibility="hidden"
    aq5v.style.visibility="hidden"
    knob5f.style.visibility="hidden"
    droptaitration.style.visibility="hidden"
    p1.style.visibility="hidden"
    p2.style.visibility="hidden"       //im here
    p3.style.visibility="hidden"
    p4.style.visibility="hidden"
    p5.style.visibility="hidden"

    p1.style.transitionDuration="0s"
    p2.style.transitionDuration="0s"
    p3.style.transitionDuration="0s"
    p4.style.transitionDuration="0s"
    p5.style.transitionDuration="0s"
    table2.style.visibility="hidden"
    headtb2.style.visibility="hidden"
    
    weingmachine.style.visibility="visible"
    bowl1.style.visibility="visible"
    bowl2.style.visibility="visible"
    spoonempty.style.visibility="visible"
    charcole1.style.visibility="visible"
    charcole2.style.visibility="visible"
    charcole3.style.visibility="visible"
    beakercharcole1.style.visibility="visible"
    beakercharcole2.style.visibility="visible"
    beakercharcole3.style.visibility="visible"
    beakercharcole4.style.visibility="visible"
    beakercharcole5.style.visibility="visible"
    beaker1.style.visibility="visible"
    beaker2.style.visibility="visible"
    beaker3.style.visibility="visible"
    beaker4.style.visibility="visible"
    beaker5.style.visibility="visible"
    on.style.visibility="visible"
    tare.style.visibility="visible"
    uu1.style.visibility="hidden"/*weg*/
    uu2.style.visibility="hidden"
    uu3.style.visibility="hidden"
    uu4.style.visibility="hidden"
    uu5.style.visibility="hidden"
    kw1.style.visibility="visible"
    kw2.style.visibility="visible"
    kw3.style.visibility="visible"
    kw4.style.visibility="visible"
    kw5.style.visibility="visible"
   
  }
  else if(pag==6){
    update()
    u=0;
    weingmachine.style.visibility="hidden"
    bowl1.style.transitionDuration="0s"
    bowl2.style.transitionDuration="0s"
    bowl1.style.visibility="hidden"
    bowl2.style.visibility="hidden"
    spoonempty.style.transitionDuration="0s"
    spoonempty.style.visibility="hidden"
    charcole1.style.transitionDuration="0s"
    charcole2.style.transitionDuration="0s"
    charcole3.style.transitionDuration="0s"

    charcole1.style.visibility="hidden"
    charcole2.style.visibility="hidden"
    charcole3.style.visibility="hidden"
    beakercharcole1.style.visibility="hidden"
    beakercharcole2.style.visibility="hidden"
    beakercharcole3.style.visibility="hidden"
    beakercharcole4.style.visibility="hidden"
    beakercharcole5.style.visibility="hidden"
    
    beaker1.style.visibility="hidden"
    beaker2.style.visibility="hidden"
    beaker3.style.visibility="hidden"
    beaker4.style.visibility="hidden"
    beaker5.style.visibility="hidden"
    on.style.visibility="hidden"
    tare.style.visibility="hidden"
    num.style.visibility="hidden"
  


    meg.style.visibility="visible"
    stirror.style.visibility="visible"
    nobspeed.style.visibility="visible"
    nobheat.style.visibility="visible"
    powerbutton.style.visibility="visible"
    powerbuttonoff.style.visibility="visible"
    machbuttonoff.style.visibility="visible"
    powerwire.style.visibility="visible"
    black11.style.visibility="visible"
    black22.style.visibility="visible"
    black33.style.visibility="visible"
    black44.style.visibility="visible"
    black55.style.visibility="visible"
    kw1.style.visibility="hidden"/*mach*/
    kw2.style.visibility="hidden"
    kw3.style.visibility="hidden"
    kw4.style.visibility="hidden"
    kw5.style.visibility="hidden"
    mkk1.style.visibility="visible"
    mkk2.style.visibility="visible"
    mkk3.style.visibility="visible"
    mkk4.style.visibility="visible"
    mkk5.style.visibility="visible"
    

  
   
   
  }
  else if(pag==7){
    update()
    uk=0;
    hand.style.transitionDuration="0s"
    hand.style.visibility="hidden"
  meg1.style.visibility="hidden"
  meg2.style.visibility="hidden"
  meg3.style.visibility="hidden"
  meg4.style.visibility="hidden"
  meg5.style.visibility="hidden"
  meg1.style.transitionDuration="0s"
  meg2.style.transitionDuration="0s"
  meg3.style.transitionDuration="0s"
  meg4.style.transitionDuration="0s"
  meg5.style.transitionDuration="0s"
  charcole3.style.visibility="hidden"
  charcole3.style.transitionDuration="0s"

    stirror.style.visibility="hidden"
    nobspeed.style.visibility="hidden"
    nobheat.style.visibility="hidden"
    powerbutton.style.visibility="hidden"
    powerbuttonoff.style.visibility="hidden"
    machbuttonoff.style.visibility="hidden"
    powerwire.style.visibility="hidden"
    black11.style.visibility="hidden"
    black22.style.visibility="hidden"
    black33.style.visibility="hidden"
    black44.style.visibility="hidden"
    black55.style.visibility="hidden"
    // blackfi1.style.visibility="hidden"
    // blackfi2.style.visibility="hidden"
    // blackfi3.style.visibility="hidden"
    // blackfi4.style.visibility="hidden"
    // blackfi5.style.visibility="hidden"
    megnatic.style.visibility="hidden"
    powerbuttonon.style.visibility="hidden"
    machbuttonon.style.visibility="hidden"
    redlight.style.visibility="hidden"

    filterstand11.style.visibility="visible"
    bflask11.style.visibility="visible"
    bflask22.style.visibility="visible"
    bflask33.style.visibility="visible"
    bflask44.style.visibility="visible"
    bflask55.style.visibility="visible"
    readyflask11.style.visibility="visible"

    solbfi1.style.visibility="hidden"
    solbfi2.style.visibility="hidden"
    solbfi3.style.visibility="hidden"
    solbfi4.style.visibility="hidden"
    solbfi5.style.visibility="hidden"

    solbfi1.style.transitionDuration="0s"
    solbfi2.style.transitionDuration="0s"
    solbfi3.style.transitionDuration="0s"
    solbfi4.style.transitionDuration="0s"
    solbfi5.style.transitionDuration="0s"
    kkk1.style.visibility="visible"/*filt*/
    kkk2.style.visibility="visible"
    kkk3.style.visibility="visible"
    kkk4.style.visibility="visible"
    kkk5.style.visibility="visible"
    // mkk1.style.visibility="hidden"
    // mkk2.style.visibility="hidden"
    // mkk3.style.visibility="hidden"
    // mkk4.style.visibility="hidden"
    // mkk5.style.visibility="hidden"
   
  }
  else if(pag==8){
    update()
    v=0;
    acflask1.style.visibility="hidden"
    acflask2.style.visibility="hidden"
    acflask3.style.visibility="hidden"
    acflask4.style.visibility="hidden"
    acflask5.style.visibility="hidden"
    acflask1.style.transitionDuration="0s"
    acflask2.style.transitionDuration="0s"
    acflask3.style.transitionDuration="0s"
    acflask4.style.transitionDuration="0s"
    acflask5.style.transitionDuration="0s"
    filterstand11.style.visibility="hidden"
    drop11.style.visibility="hidden"
    bflask11.style.visibility="hidden"
    bflask22.style.visibility="hidden"
    bflask33.style.visibility="hidden"
    bflask44.style.visibility="hidden"
    bflask55.style.visibility="hidden"
    readyflask11.style.visibility="hidden"

    
    brstandtai.style.visibility="visible"
    f111.style.visibility="visible"
    f222.style.visibility="visible"
    f333.style.visibility="visible"
    f444.style.visibility="visible"
    f555v.style.visibility="visible"
    knob3rd.style.visibility="visible"
    p111.style.visibility="visible"
    p222.style.visibility="visible"
    p333 .style.visibility="visible"
   p444.style.visibility="visible"
   p555.style.visibility="visible"
   table111f.style.visibility="visible"
   heading33.style.visibility="visible"
   kkk1.style.visibility="hidden"/*tail*/
   kkk2.style.visibility="hidden"
   kkk3.style.visibility="hidden"
   kkk4.style.visibility="hidden"
   kkk5.style.visibility="hidden"
   kkkk1.style.visibility="visible"
kkkk2.style.visibility="visible"
kkkk3.style.visibility="visible"
kkkk4.style.visibility="visible"
kkkk5.style.visibility="visible"
   

   /*brstand3rd
   f111
   f222
   f333
   f444
   f555
   knob3rd
   p111
   p222
   p333 
  p444
  p555
  table111
  heading33*/

  }
  else if(pag==9){
    update();

    brstandtai.style.visibility="hidden"
f111.style.visibility="hidden"
f222.style.visibility="hidden"
f333.style.visibility="hidden"
f444.style.visibility="hidden"
f555v.style.visibility="hidden"
knob3rd.style.visibility="hidden"
p111.style.visibility="hidden"
p222.style.visibility="hidden"
p333 .style.visibility="hidden"
p444.style.visibility="hidden"
p555.style.visibility="hidden"
table111f.style.visibility="hidden"
heading33.style.visibility="hidden"
// kkk1.style.visibility="hidden"/*tail*/
// kkk2.style.visibility="hidden"
// kkk3.style.visibility="hidden"
// kkk4.style.visibility="hidden"
// kkk5.style.visibility="hidden"
kkkk1.style.visibility="hidden"
kkkk2.style.visibility="hidden"
kkkk3.style.visibility="hidden"
kkkk4.style.visibility="hidden"
kkkk5.style.visibility="hidden"

    submitresult.style.visibility="visible"
    he1.style.visibility="visible"
    he2.style.visibility="visible"
    he3.style.visibility="visible"
    he33.style.visibility="visible"
    he0.style.visibility="visible"
    table111.style.visibility="visible"
    table222.style.visibility="visible"
    table333.style.visibility="visible"
    usertable.style.visibility="visible"
    image.style.visibility="visible"
    next.style.visibility="hidden" 
    
  }
}

var masurwater11=document.querySelector("#masurwater")
var masurcyll=document.querySelector("#masurcylender")
var mkippi11=document.querySelector("#mkippi")
var mdrop11=document.querySelector("#mdrop")
var fkippi11=document.querySelector("#fkippi1")
var f1drop11=document.querySelector("#f1drop")
var f1sol11=document.querySelector("#f1sol")
var fkippi22=document.querySelector("#fkippi2")
var f1drop22=document.querySelector("#f2drop")
var f1sol22=document.querySelector("#f2sol")
var fkippi33=document.querySelector("#fkippi3")
var f1drop33=document.querySelector("#f3drop")
var f1sol33=document.querySelector("#f3sol")
var flask11=document.querySelector("#flask1")
var sol00=document.querySelector("#sol0")
var sol11=document.querySelector("#sol1")
var sol22=document.querySelector("#sol2")






var s;
function flask1put(){
    if(s==1){
        console.log("hello")
        flask11.style.transform = " translate(260%,-60%) rotate(80deg) ";
        
        mkippi11.style.visibility="visible";
        setTimeout (function(){
           masurwater11.style.visibility="visible";
            mdrop11.style.visibility="visible";
            setTimeout(function() {
                mdrop11.style.visibility="hidden";
            },400);
        },2200)
        setTimeout(function(){
            flask11.style.transform = " translate(0%,0%) rotate(0deg) ";
            flask11.style.visibility="hidden";
            
            mkippi11.style.visibility="hidden";
          },2800)
          setTimeout(function(){
           
         
          sol00.style.visibility="visible";
          update()
      },4000)
        s+=1; 
    }
  }
function solput0(){
  
  if(s==3){
    console.log("iuerhgeohgio")
    sol00.style.transform="translate(280%,-60%) rotate(80deg)";
    mkippi11.style.visibility="visible";
    setTimeout (function(){
       masurwater11.style.visibility="visible";
        mdrop11.style.visibility="visible";
        setTimeout(function() {
            mdrop11.style.visibility="hidden";
        },400);
    },2200)
    setTimeout(function(){
        sol00.style.transform = " translate(0%,0%) rotate(0deg) ";
        mkippi11.style.visibility="hidden";
        sol00.style.visibility="hidden";
        
    },2800)
    setTimeout(function(){
      
      sol11.style.visibility="visible";
      update()

  },4000)
    s+=1; 
       
  }
}

   function solput1() {
    if(s==5){
      console.log("hello")
      sol11.style.transform = "translate(260%,-60%) rotate(80deg)";
      
      mkippi11.style.visibility="visible";
      setTimeout (function(){
         masurwater11.style.visibility="visible";
          mdrop11.style.visibility="visible";
          setTimeout(function() {
              mdrop11.style.visibility="hidden";
          },400);
      },2200)
      setTimeout(function(){
          sol11.style.transform = " translate(0%,0%) rotate(0deg) ";
          
          sol11.style.visibility="hidden";
          mkippi11.style.visibility="hidden";
          
      },2800)
      setTimeout(function(){
        
        sol22.style.visibility="visible";
        update()
      
       

      },4000)
       s+=1; 
    }
   }

function masurcyput(){
    if(s==2){
      console.log("hello")
        masurcyll.style.transform = " translate(130%,-80%) rotate(80deg) ";
        masurwater11.style.transform = " translate(168%,-163%) rotate(80deg) ";
        fkippi11.style.visibility="visible";
        masurwater11.style.visibility="hidden";
        setTimeout (function(){
           
           
            f1drop11.style.visibility="visible";
            f1sol11.style.visibility="visible";
            
            setTimeout(function() {
                f1drop11.style.visibility="hidden";
               
            },400);
        },2200)
        setTimeout(function(){
           
        masurcyll.style.transform = " translate(0%,0%) rotate(0deg) ";
        masurwater11.style.transform = " translate(0%,-0%) rotate(0deg) ";
        fkippi11.style.visibility="hidden";
        update()
        },3000)
        s+=1;
        
    }
    else if(s==4){
        masurcyll.style.transform = " translate(330%,-80%) rotate(80deg) ";
        masurwater11.style.transform = " translate(600%,-163%) rotate(80deg) ";
        fkippi22.style.visibility="visible";
        masurwater11.style.visibility="hidden";
        setTimeout (function(){
           
           
            f1drop22.style.visibility="visible";
            f1sol22.style.visibility="visible";
            
            setTimeout(function() {
                f1drop22.style.visibility="hidden";
               
            },400);
        },2200)
        setTimeout(function(){
           
        masurcyll.style.transform = " translate(0%,0%) rotate(0deg) ";
        masurwater11.style.transform = " translate(0%,-0%) rotate(0deg) ";
        fkippi22.style.visibility="hidden";
        update()
        },3000)
        s+=1;

    }
    else if(s==6){
        masurcyll.style.transform = " translate(500%,-80%) rotate(80deg) ";
        masurwater11.style.transform = " translate(1000%,-166%) rotate(80deg) ";
        fkippi33.style.visibility="visible";
        masurwater11.style.visibility="hidden";
        setTimeout (function(){
           
           
            f1drop33.style.visibility="visible";
            f1sol33.style.visibility="visible";
            
            setTimeout(function() {
                f1drop33.style.visibility="hidden";
               
            },400);
        },2200)
        setTimeout(function(){
           
        masurcyll.style.transform = " translate(0%,0%) rotate(0deg) ";
        masurwater11.style.transform = " translate(0%,-0%) rotate(0deg) ";
        fkippi33.style.visibility="hidden";
        update()
        },3000)
        s+=1;
        pag=1;
    }
}


/*********************************step2nd******activater3*************************************************/
var f;

var activater1 = document.querySelector("#activaterdroper")
var drp0= document.querySelector("#drop0")
var drp1 = document.querySelector("#drop1")
var drp2 = document.querySelector("#drop2")
var ai =document.querySelector("arroeimage")



function act1(){
  if (f==0) {
      console.log(f)
   
   activater1.style.transform = "translate(-1300%,-160%)";
  

   setTimeout(function () {
     drp0.style.visibility = "visible";
     drp0.style.transform ="translate(0%,700%)"
    
    
   }, 2500)

   setTimeout(function () {
     act1reverse()
     drp0.style.visibility = "hidden";
   
   }, 3000);
 
   
 }

 function act1reverse() {
   drp0.style.visibility = "hidden";
  
   activater1.style.transform = "translate(0%,-0%)";
   update()
   f +=1 ;
 }
}
function act2(){
  if (f==1) {
      console.log(f)
   
   activater1.style.transform = "translate(-990%,-160%)";
  

   setTimeout(function () {
     drp1.style.visibility = "visible";
     drp1.style.transform ="translate(0%,700%)"
    
    
   }, 2500)

   setTimeout(function () {
     act2reverse()
     drp1.style.visibility = "hidden";
   
   }, 3000);
 
   
 }

 function act2reverse() {
   drp1.style.visibility = "hidden";
  
   activater1.style.transform = "translate(0%,-0%)";
   update()
   f +=1 ;
 }
}
function act3(){
  if (f==2) {
      console.log(f)
   
   activater1.style.transform = "translate(-672%,-160%)";
  

   setTimeout(function () {
     drp2.style.visibility = "visible";
     drp2.style.transform ="translate(0%,700%)"
    
    
   }, 2500)

   setTimeout(function () {
     act3reverse()
     drp2.style.visibility = "hidden";
   
   }, 3000);
 
   
 }

 function act3reverse() {
   drp2.style.visibility = "hidden";
  
   activater1.style.transform = "translate(0%,-0%)";
   f +=1 ;
   update()
   pag+=1;
 }
}
 
/**************************************************************step3 taitration 3*******************************/

var k;
var new1 = document.querySelector("#pinkk1");
var pflask2 = document.querySelector("#pinkk2");
var pflask3 = document.querySelector("#pinkk3");
var orgl = document.querySelector("#orgflsk");
var aql = document.querySelector("#flask2");
var flask3 = document.querySelector("#flaskk3");
var drpp = document.querySelector("#dropp");

function titration1() {
  if (k == 0) {
    console.log(s);
    orgl.style.transform = "translate(680%,0%)";
    volumeo1.innerHTML = "10";
    update();
  }
  k = 1;
}

function titrate() {
  if (k == 1) {
    drpp.style.visibility = "visible";
    drpp.style.transform = "translate(0%,700%)";

    setTimeout(() => {
      drpp.style.visibility = "hidden";
    }, 200);

    setTimeout(() => {
      drpp.style.transform = "translate(0%,0%)";
    }, 1000);

    k = 2;
  }

 else if (k == 2) {
  drpp.style.visibility = "visible";
  drpp.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpp.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpp.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    new1.style.opacity = "100%";          // show pink liquid
    orgl.style.visibility = "hidden";     // hide original flask

    // ✅ Apply one-time shake to pink flask
    new1.classList.remove("flask-shake");
    void new1.offsetWidth;
    new1.classList.add("flask-shake");

    update();
  }, 2500);

  k = 3;
}


  else if (k == 5) {
    drpp.style.visibility = "visible";
    drpp.style.transform = "translate(0%,700%)";

    setTimeout(() => {
      drpp.style.visibility = "hidden";
    }, 200);

    setTimeout(() => {
      drpp.style.transform = "translate(0%,0%)";
    }, 1000);

    k = 6;
  }

 else if (k == 6) {
  drpp.style.visibility = "visible";
  drpp.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpp.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpp.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pflask2.style.opacity = "100%";
    aql.style.visibility = "hidden";

    // 🧪 Lab-style Shake for pinkk2
    pflask2.classList.remove("flask-shake");
    void pflask2.offsetWidth;
    pflask2.classList.add("flask-shake");

    update();
  }, 2500);

  k = 7;
}


  else if (k == 9) {
    drpp.style.visibility = "visible";
    drpp.style.transform = "translate(0%,700%)";

    setTimeout(() => {
      drpp.style.visibility = "hidden";
    }, 200);

    setTimeout(() => {
      drpp.style.transform = "translate(0%,0%)";
    }, 1000);

    k = 10;
  }

else if (k == 10) {
  drpp.style.visibility = "visible";
  drpp.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpp.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpp.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pflask3.style.opacity = "100%";
    flask3.style.visibility = "hidden";

    // 🧪 Lab-style Shake for pinkk3
    pflask3.classList.remove("flask-shake");
    void pflask3.offsetWidth;
    pflask3.classList.add("flask-shake");

    update();
  }, 2500);

  k = 11;
}

}

function pink1() {
  if (k == 3) {
    new1.style.transform = "translate(-680%,0%)";
    volumen1.innerHTML = "21";
    update();
    k = 4;
  }
}

function pink2() {
  if (k == 7) {
    pflask2.style.transform = "translate(-480%,0%)";
    volumen2.innerHTML = "21";
    update();
    k = 8;
  }
}

function pink3() {
  if (k == 11) {
    pflask3.style.transform = "translate(-280%,0%)";
    volumen3.innerHTML = "21";
    update();
    
    // CRITICAL FIX: Force transition to step 5 after S3 titration completes
    setTimeout(() => {
      console.log('🔄 S3 completed, forcing transition to step 5 (acetic acid prep)');
      pag = 3;
      if (typeof nextpage === 'function') {
        nextpage();
        console.log('✅ Transitioned to step 5, pag =', pag);
      }
    }, 1000);
  }
}

function titration2() {
  if (k == 4) {
    aql.style.transform = "translate(480%,0%)";
    volumeo2.innerHTML = "10";
    update();
    k = 5;
  }
}

function titration3() {
  if (k == 8) {
    flask3.style.transform = "translate(280%,0%)";
    volumeo3.innerHTML = "10";
    update();
    k = 9;
  }
}

/************************************activetor5*****************************88 */


var q;

var activater5f = document.querySelector("#activaterdroper55f")
var drper0= document.querySelector("#droper0")
var drper1 = document.querySelector("#droper1")
var drper2 = document.querySelector("#droper2")
var drper3 = document.querySelector("#droper3")
var drper4 = document.querySelector("#droper4")




function droper1(){
  if (q==0) {
      console.log(q)
   
   activater5f.style.transform = "translate(-1650%,-160%)";
  

   setTimeout(function () {
     drper0.style.visibility = "visible";
     drper0.style.transform ="translate(0%,700%)"
    
    
   }, 2500)

   setTimeout(function () {
     droper1reverse()
     drper0.style.visibility = "hidden";
   
   }, 3000);
 
   
 }

 function droper1reverse() {
   drper0.style.visibility = "hidden";
  
   activater5f.style.transform = "translate(0%,-0%)";
   update()
   q +=1 ;
 }
}
function droper2(){
  if (q==1) {
      console.log(q)
   
   activater5f.style.transform = "translate(-1300%,-160%)";
  

   setTimeout(function () {
     drper1.style.visibility = "visible";
     drper1.style.transform ="translate(0%,700%)"
    
    
   }, 2500)

   setTimeout(function () {
     droper2reverse()
     drper1.style.visibility = "hidden";
   
   }, 3000);
 
   
 }

 function droper2reverse() {
   drper1.style.visibility = "hidden";
  
   activater5f.style.transform = "translate(0%,-0%)";
   update()
   q +=1 ;
 }
}
function droper3(){
  if (q==2) {
      console.log(q)
   
   activater5f.style.transform = "translate(-1000%,-160%)";
  

   setTimeout(function () {
     drper2.style.visibility = "visible";
     drper2.style.transform ="translate(0%,700%)"
    
    
   }, 2500)

   setTimeout(function () {
     droper3reverse()
     drper2.style.visibility = "hidden";
   
   }, 3000);
 
   
 }

 function droper3reverse() {
   drper2.style.visibility = "hidden";
  
   activater5f.style.transform = "translate(0%,-0%)";
   update()
   q +=1 ;
 }
}

function droper4(){
  if (q==3) {
      console.log(q)
   
   activater5f.style.transform = "translate(-700%,-160%)";
  

   setTimeout(function () {
     drper3.style.visibility = "visible";
     drper3.style.transform ="translate(0%,700%)"
    
    
   }, 2500)

   setTimeout(function () {
     droper4reverse()
     drper3.style.visibility = "hidden";
   
   }, 3000);
 
   
 }

 function droper4reverse() {
   drper3.style.visibility = "hidden";
  
   activater5f.style.transform = "translate(0%,-0%)";
   update()
   q+= 1 ;
 }
}

function droper5(){
  if (q==4) {
      console.log(q)
   
   activater5f.style.transform = "translate(-400%,-160%)";
  

   setTimeout(function () {
     drper4.style.visibility = "visible";
     drper4.style.transform ="translate(0%,700%)"
    
    
   }, 2500)

   setTimeout(function () {
     droper5reverse()
     drper4.style.visibility = "hidden";
   
   }, 3000);
 
   
 }

 function droper5reverse() {
   drper4.style.visibility = "hidden";
  
   activater5f.style.transform = "translate(0%,-0%)";
   update()
   q +=1 ;
   pag=4;
 }
}



/********************************taitration5**************************8 */
var p ;
var pf1 = document.querySelector("#p1")
var pf2 = document.querySelector("#p2")
var pf3 = document.querySelector("#p3")
var pf4 = document.querySelector("#p4")
var pf5 = document.querySelector("#p5")
var orglflask = document.querySelector("#f1");
var aq2= document.querySelector("#f2")
var aq3=document.querySelector("#f3")
var aq4=document.querySelector("#f4")
var aq5v=document.querySelector("#f5v")
var drpt = document.querySelector("#droptaitration")
var vol1=document.querySelector("#vol1")
var arrowbule2 =document.querySelector("#arrowblue2")
var arrowbule1 =document.querySelector("#arrowblue1")

function ti1() {
  if (p== 0) {
    console.log(s);
    orglflask.style.transform = "translate(880%,0%) ";
     vol1.innerHTML ="10";
     ireading1.innerHTML="0";
     update()
  }
p=1
  
}

function titrate5f() {
  if (p == 1) {
    drpt.style.visibility = "visible"
    drpt.style.transform = "translate(0%,700%) ";

   setTimeout(() => {
      drpt.style.visibility = "hidden"
     
    }, 200);
   
    setTimeout(() => {
       drpt.style.transform = "translate(0%,0%)"
      
     }, 1000);
     

     
    p=2;

    

  }
 else if (p == 2) {
  drpt.style.visibility = "visible";
  drpt.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf1.style.opacity = "100%";
    orglflask.style.visibility = "hidden";

    // ✅ Shake effect for pf1
    pf1.classList.remove("flask-shake");
    void pf1.offsetWidth;
    pf1.classList.add("flask-shake");

    update();
  }, 2500);

  p = 3;
}


  else if (p == 5) {
    drpt.style.visibility = "visible"
    drpt.style.transform = "translate(0%,700%) ";

    setTimeout(() => {
      drpt.style.visibility = "hidden"

    }, 200);

    setTimeout(() => {
       drpt.style.transform = "translate(0%,0%)"
     }, 1000);

    p=6;

   

  }
else if (p == 6) {
  drpt.style.visibility = "visible";
  drpt.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf2.style.opacity = "100%";
    aq2.style.visibility = "hidden";

    // ✅ Shake effect for pf2
    pf2.classList.remove("flask-shake");
    void pf2.offsetWidth;
    pf2.classList.add("flask-shake");

    update();
  }, 2500);

  p = 7;
}


  else if (p == 9) {
    drpt.style.visibility = "visible"
    drpt.style.transform = "translate(0%,700%) ";

    setTimeout(() => {
      drpt.style.visibility = "hidden"

    }, 200);

    setTimeout(() => {
       drpt.style.transform = "translate(0%,0%)"
     }, 1000);

   p=10

  }
else if (p == 10) {
  drpt.style.visibility = "visible";
  drpt.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf3.style.opacity = "100%";
    aq3.style.visibility = "hidden";

    // ✅ Shake effect for pf3
    pf3.classList.remove("flask-shake");
    void pf3.offsetWidth;
    pf3.classList.add("flask-shake");

    update();
  }, 2500);

  p = 11;
}


  else if (p == 13) {
    drpt.style.visibility = "visible"
    drpt.style.transform = "translate(0%,700%) ";

    setTimeout(() => {
      drpt.style.visibility = "hidden"

    }, 200);

    setTimeout(() => {
       drpt.style.transform = "translate(0%,0%)"
     }, 1000);

    p=14;

   

  }
else if (p == 14) {
  drpt.style.visibility = "visible";
  drpt.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf4.style.opacity = "100%";
    aq4.style.visibility = "hidden";

    // ✅ Shake effect for pf4
    pf4.classList.remove("flask-shake");
    void pf4.offsetWidth;
    pf4.classList.add("flask-shake");

    update();
  }, 2500);

  p = 15;
}  
  
  else if (p == 17) {
    drpt.style.visibility = "visible"
    drpt.style.transform = "translate(0%,700%) ";

    setTimeout(() => {
      drpt.style.visibility = "hidden"

    }, 200);

    setTimeout(() => {
       drpt.style.transform = "translate(0%,0%)"
     }, 1000);

    p=18;

   

  }
else if (p == 18) {
  drpt.style.visibility = "visible";
  drpt.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf5.style.opacity = "100%";
    aq5v.style.visibility = "hidden";

    // ✅ Shake effect for pf5
    pf5.classList.remove("flask-shake");
    void pf5.offsetWidth;
    pf5.classList.add("flask-shake");

    update();
  }, 2500);

  p = 19;
}
  
  

}
function pi1(){
  console.log('🔍 pi1() called with p =', p);
  
  // CRITICAL FIX: Force the correct state and execute the flask return
  if(p >= 3){
    const pf1Element = document.querySelector("#pf1");
    if (pf1Element) {
      pf1Element.style.transform = "translate(-880%,0%)";
      console.log('✅ U1 pink flask moved back to original position');
    }
    
    // Update readings
    const freading1 = document.querySelector("#freading1");
    const total1 = document.querySelector("#total1");
    const strength1 = document.querySelector("#Strength1");
    
    if (freading1) freading1.innerHTML = "0";
    if (total1) total1.innerHTML = "41";
    if (strength1) strength1.innerHTML = "0.197";
    
    update();
    p = 4;
    console.log('✅ pi1() completed, p =', p);
  } else {
    console.log('⚠️ pi1() failed - incorrect p value:', p);
  }
}
function pi2(){
  if(p==7){
    pf2.style.transform = "translate(-740%,0%)";
  freading2.innerHTML="	18.9	"
  total2.innerHTML="18.9"
  Strength2.innerHTML="0.091"
    update()
    p=8
  }
}
function pi3(){
  if(p==11){
    pf3.style.transform = "translate(-595%,0%)";
    freading3.innerHTML="	10.9	"
    total3.innerHTML="10.9"
    Strength3.innerHTML="0.052"
    update()
   
    p=12
    
  }
}
function pi4(){
  if(p==15){
    pf4.style.transform = "translate(-457%,0%)";
    freading4.innerHTML="	8.9	"
     total4.innerHTML="8.9"
     Strength4.innerHTML="0.043"
    update()
 
    p=16;
    
  }
}
function pi5(){
  if(p==19){
    pf5.style.transform = "translate(-320%,0%)";
   freading5.innerHTML="5.5	"
    total5.innerHTML="5.5"
    Strength5.innerHTML="0.026"
    update()
    pag=5;
    
    
  }
}





function ti2() {
  if (p== 4) {
    aq2.style.transform = "translate(750%,0%) ";
    
    vol2.innerHTML="10"
    ireading2.innerHTML="0"
    update()
    p=5;

  }

}


function ti3() {
  if (p == 8) {
    aq3.style.transform = "translate(593%,0%) ";
    
    vol3.innerHTML="10"
    ireading3.innerHTML="0"
 update()
 
p=9;
  }

}
function ti4() {
  if (p== 12) {
    aq4.style.transform = "translate(457%,0%) ";
    
    vol4.innerHTML="10"
    ireading4.innerHTML="0"
    update()
    p=13;

  }

}
function ti5v() {
  if (p== 16) {
    aq5v.style.transform = "translate(320%,0%) ";
    
    vol5.innerHTML="10"
    ireading5.innerHTML="0"
    update()
    p=17;

  }

}




 /**********************************step5 weing charcole************************************* */
 var kw1=document.querySelector("#wk1")
 var kw2=document.querySelector("#wk2")
 var kw3=document.querySelector("#wk3")
 var kw4=document.querySelector("#wk4")
 var kw5=document.querySelector("#wk5")
 var num=document.querySelector("#number")
var bowl11=document.querySelector("#bowl1")
var bowl22=document.querySelector("#bowl2")
var but=document.querySelector("#on")
var tare=document.querySelector("#tare")
var spoon1=document.querySelector("#spoonempty")
var spoon2=document.querySelector("#spoonfill")
var bowlcharole=document.querySelector("#charcole1")
var bowlcharole2=document.querySelector("#charcole2")
var bowlcharole3=document.querySelector("#charcole3")
var charcolemove=document.querySelector("#movecharcole")
var charcolefill=document.querySelector("#fillcharcole")
var charcolefill2=document.querySelector("#fillcharcole2")
var bekarcharcoleee1=document.querySelector("#beakercharcole1")
var bekarcharcoleee2=document.querySelector("#beakercharcole2")
var bekarcharcoleee3=document.querySelector("#beakercharcole3")
var bekarcharcoleee4=document.querySelector("#beakercharcole4")
var bekarcharcoleee5=document.querySelector("#beakercharcole5")
var beaker11=document.querySelector("#beaker1")
var beaker22=document.querySelector("#beaker2")
var beaker33=document.querySelector("#beaker3")
var beaker44=document.querySelector("#beaker4")
var beaker55=document.querySelector("#beaker5")
var weingmachine=document.querySelector("#weingmachine")
var m;
function onbutton(){
    if(m==1){
        num.style.visibility="visible";
        update()
    }
    m+=1;   
}
function bowlput(){
    if(m==2){
     
        bowl11.style.transform="translate(-116%,-100%)";
        bowl11.style.transform="translate(-230%,-250%)";
        charcolefill2.style.visibility="visible"
        charcolefill.style.visibility="visible"
        charcolefill2.style.opacity="100%"         
        charcolefill.style.opacity="100%"  
       
        setTimeout(function(){
            num.innerHTML="5gm";
            update()
         

        },2200)  
        m+=1;
    
      

    }
    else if(m==6){
        
        bowl11.style.transform="translate(150%, -800%) "
        charcolefill2.style.transform="translate(90%, -1340%)"
        charcolefill.style.transform="translate(90%, -1320%) "
        num.innerHTML="0.0gm";

        
        setTimeout(function(){
          bowl11.style.transform=" translate(150%, -800%) rotate(45deg)"
          charcolefill2.style.transform="translate(200%, -1000%) rotate(45deg)"
          charcolefill.style.transform="translate(200%, -1000%)rotate(45deg) "
        },1200)
        setTimeout(function(){
            bowl11.style.transform=" rotate(0deg)"
          charcolefill2.style.transform="translate(200%, -200%) rotate(45deg)"
          charcolefill.style.transform="translate(200%, -200%)rotate(45deg) "
        
        },1900)
        setTimeout(function(){
                    charcolefill2.style.opacity="0%"
                  
                    charcolefill.style.opacity="0%"
                    bekarcharcoleee1.style.visibility="visible";
          
        },2200)
        setTimeout(function(){
          
          bekarcharcoleee1.style.opacity="100%"
          
          
          bowl11.style.transform="translate(0%, 0%) rotate(0deg)"
           },3000)
     
    
       setTimeout(function()  {
     
        charcolefill.style.transform="translate(0%, 0%) rotate(0deg)"
        charcolefill2.style.transform="translate(0%, 0%) rotate(0deg)"
        bowlcharole3.style.visibility="visible"
        update()
     
       },4000);
       m+=1

    }
    else if(m==7){
        bowl11.style.transform="translate(-116%,-100%)";
        bowl11.style.transform="translate(-230%,-250%)";
        charcolefill2.style.visibility="visible"
        charcolefill.style.visibility="visible"
        charcolefill2.style.opacity="100%"         
        charcolefill.style.opacity="100%"  
       
        setTimeout(function(){
            num.innerHTML="5gm";
            update()
        },2200)  
        m+=1;
    }
    else if(m==11){
        bowl11.style.transform="translate(280%, -800%) "
        charcolefill2.style.transform="translate(420%, -1340%)"
        charcolefill.style.transform="translate(420%, -1320%) "
        num.innerHTML="0.0gm";
        setTimeout(function(){
          bowl11.style.transform=" translate(280%, -800%) rotate(45deg)"
          charcolefill2.style.transform="translate(610%, -1000%) rotate(45deg)"
          charcolefill.style.transform="translate(610%, -1000%)rotate(45deg) "
        },1200)
        setTimeout(function(){
            bowl11.style.transform=" rotate(0deg)"
          charcolefill2.style.transform="translate(610%, -200%) rotate(45deg)"
          charcolefill.style.transform="translate(610%, -200%)rotate(45deg) "
        
        },1900)
        setTimeout(function(){
                    charcolefill2.style.opacity="0%"
                    bekarcharcoleee2.style.visibility="visible";
                    charcolefill.style.opacity="0%"
          
        },2200)
        setTimeout(function(){
          
          bekarcharcoleee2.style.opacity="100%"
          
          bowl11.style.transform="translate(0%, 0%) rotate(0deg)"
           },3000)
    
       setTimeout(function()  {
        charcolefill.style.transform="translate(0%, 0%) rotate(0deg)"
        charcolefill2.style.transform="translate(0%, 0%) rotate(0deg)"
        bowlcharole3.style.visibility="visible"
        update()
   
       },4000);
       m+=1

    }
    else if(m==12){
        bowl11.style.transform="translate(-116%,-100%)";
        bowl11.style.transform="translate(-230%,-250%)";
        charcolefill2.style.visibility="visible"
        charcolefill.style.visibility="visible"
        charcolefill2.style.opacity="100%"         
        charcolefill.style.opacity="100%"  
       
        setTimeout(function(){
            num.innerHTML="5gm";
            update()
        },2200)  
        m+=1;
    }
    else if(m==16){
        bowl11.style.transform="translate(410%, -800%) "
        charcolefill2.style.transform="translate(780%, -1340%)"
        charcolefill.style.transform="translate(780%, -1320%) "
        num.innerHTML="0.0gm";
        setTimeout(function(){
          bowl11.style.transform=" translate(410%, -800%) rotate(45deg)"
          charcolefill2.style.transform="translate(1070%, -1000%) rotate(45deg)"
          charcolefill.style.transform="translate(1070%, -1000%)rotate(45deg) "
        },1200)
        setTimeout(function(){
            bowl11.style.transform=" rotate(0deg)"
          charcolefill2.style.transform="translate(1070%, -200%) rotate(45deg)"
          charcolefill.style.transform="translate(1070%, -200%)rotate(45deg) "
        
        },1900)
        setTimeout(function(){
                    charcolefill2.style.opacity="0%"
                    bekarcharcoleee3.style.visibility="visible";
                    charcolefill.style.opacity="0%"
          
        },2200)
        setTimeout(function(){
          
          bekarcharcoleee3.style.opacity="100%"
          
          bowl11.style.transform="translate(0%, 0%) rotate(0deg)"
           },3000)
    
       setTimeout(function()  {
        charcolefill.style.transform="translate(0%, 0%) rotate(0deg)"
        charcolefill2.style.transform="translate(0%, 0%) rotate(0deg)"
        bowlcharole3.style.visibility="visible"
        update()
   
       },4000);
       m+=1


    }
    else if(m==17){
        bowl11.style.transform="translate(-116%,-100%)";
        bowl11.style.transform="translate(-230%,-250%)";
        charcolefill2.style.visibility="visible"
        charcolefill.style.visibility="visible"
        charcolefill2.style.opacity="100%"         
        charcolefill.style.opacity="100%"  
       
        setTimeout(function(){
            num.innerHTML="5gm";
            update()
        },2200)  
        m+=1;
    }
    else if(m==21){
        bowl11.style.transform="translate(540%, -800%) "
        charcolefill2.style.transform="translate(1180%, -1340%)"
        charcolefill.style.transform="translate(1180%, -1320%) "
        num.innerHTML="0.0gm";
        setTimeout(function(){
            bowl11.style.transform="translate(540%, -800%)rotate(45deg) "
          charcolefill2.style.transform="translate(1430%, -1000%) rotate(45deg)"
          charcolefill.style.transform="translate(1430%, -1000%)rotate(45deg) "
        },1200)
        setTimeout(function(){
            bowl11.style.transform=" rotate(0deg)"
          charcolefill2.style.transform="translate(1430%, -200%) rotate(45deg)"
          charcolefill.style.transform="translate(1430%, -200%)rotate(45deg) "
        
        },1900)
        setTimeout(function(){
                    charcolefill2.style.opacity="0%"
                    bekarcharcoleee4.style.visibility="visible";
                    charcolefill.style.opacity="0%"
          
        },2200)
        setTimeout(function(){
          
          bekarcharcoleee4.style.opacity="100%"
          
          bowl11.style.transform="translate(0%, 0%) rotate(0deg)"
           },3000)
    
       setTimeout(function()  {
        charcolefill.style.transform="translate(0%, 0%) rotate(0deg)"
        charcolefill2.style.transform="translate(0%, 0%) rotate(0deg)"
        bowlcharole3.style.visibility="visible"
        update()
       },4000);
       m+=1


    }
    else if(m==22){
        bowl11.style.transform="translate(-116%,-100%)";
        bowl11.style.transform="translate(-230%,-250%)";
        charcolefill2.style.visibility="visible"
        charcolefill.style.visibility="visible"
        charcolefill2.style.opacity="100%"         
        charcolefill.style.opacity="100%"  
       
        setTimeout(function(){
            num.innerHTML="5gm";
            update()
        },2200)  
        m+=1;
    }
    else if(m==26){
        bowl11.style.transform="translate(670%, -800%) "
        charcolefill2.style.transform="translate(1570%, -1340%)"
        charcolefill.style.transform="translate(1570%, -1320%) "
        num.innerHTML="0.0gm";
        setTimeout(function(){
          bowl11.style.transform=" translate(670%, -800%) rotate(45deg)"
          charcolefill2.style.transform="translate(1850%, -1000%) rotate(45deg)"
          charcolefill.style.transform="translate(1850%, -1000%)rotate(45deg) "
        },1200)
        setTimeout(function(){
            bowl11.style.transform=" rotate(0deg)"
          charcolefill2.style.transform="translate(1850%, -200%) rotate(45deg)"
          charcolefill.style.transform="translate(1850%, -200%)rotate(45deg) "
        
        },1900)
        setTimeout(function(){
                    charcolefill2.style.opacity="0%"
                   
                    bekarcharcoleee5.style.visibility="visible";
                    charcolefill.style.opacity="0%"
          
        },2200)
        setTimeout(function(){
          
          bekarcharcoleee5.style.opacity="100%"
          
          bowl11.style.transform="translate(0%, 0%) rotate(0deg)"
           },3000)
    
       setTimeout(function()  {
        charcolefill.style.transform="translate(0%, 0%) rotate(0deg)"
        charcolefill2.style.transform="translate(0%, 0%) rotate(0deg)"
        bowlcharole3.style.visibility="visible"
        update()
   
       },4000);
       m+=1

     pag=6;
    }
}
function tarebutton(){
    if(m==3){
        num.innerHTML="0.0gm";
        update()  
        m+=1;
       

    }
    else if(m==8){
        num.innerHTML="0.0gm";
        update()  
        m+=1;
       

    }
    else if(m==13){
        num.innerHTML="0.0gm";  
        update()
        m+=1;
       

    }
    else if(m==18){
        num.innerHTML="0.0gm";  
        update()
        m+=1;
      

    }
    else if(m==23){
        num.innerHTML="0.0gm";
        update()  
        m+=1;
        
        

    }
}
spoon1.style.transform="rotate(40deg)";
function spoonput(){
    if(m==4){
       
        spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole3.style.visibility="hidden"
            bowlcharole.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill.style.transform="translate(-1100%,-320%) ";
            setTimeout(function(){
                  num.innerHTML="0.05gm";
            },1700)

        },1200)
        setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
      
    }
    else if(m==5){
      spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole.style.visibility="hidden"
            bowlcharole2.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill2.style.transform="translate(-1100%,-370%) ";
            setTimeout(function(){
                  num.innerHTML="1gm";
                },1700)

            },1200)
            setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
    }
    else if(m==9){
        spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole3.style.visibility="hidden"
            bowlcharole.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill.style.transform="translate(-1100%,-320%) ";
            setTimeout(function(){
                  num.innerHTML="0.05gm";
            },1700)

        },1200)
        setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
    }
    else if(m==10){
        spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole.style.visibility="hidden"
            bowlcharole2.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill2.style.transform="translate(-1100%,-370%) ";
            setTimeout(function(){
                  num.innerHTML="1gm";
                },1700)

            },1200)
            setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
    }
    else if(m==14){
        spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole3.style.visibility="hidden"
            bowlcharole.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill.style.transform="translate(-1100%,-320%) ";
            setTimeout(function(){
                  num.innerHTML="0.05gm";
            },1700)

        },1200)
        setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
    }
    else if(m==15){
        spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole3.style.visibility="hidden"
            bowlcharole.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill2.style.transform="translate(-1100%,-370%) ";
            setTimeout(function(){
                  num.innerHTML="1gm";
                },1700)

            },1200)
            setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
    }
    else if(m==19){
        spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole3.style.visibility="hidden"
            bowlcharole.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill.style.transform="translate(-1100%,-320%) ";
            setTimeout(function(){
                  num.innerHTML="0.05gm";
            },1700)

        },1200)
        setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
    }
    else if(m==20){
        spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole.style.visibility="hidden"
            bowlcharole2.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill2.style.transform="translate(-1100%,-370%) ";
            setTimeout(function(){
                  num.innerHTML="1gm";
                },1700)

            },1200)
            setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
    }
    else if(m==24){
        spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole3.style.visibility="hidden"
            bowlcharole.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill2.style.transform="translate(-1100%,-320%) ";
            setTimeout(function(){
                  num.innerHTML="0.05gm";
            },1700)

        },1200)
        setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
    }
    else if(m==25){
        spoon1.style.transform="translate(-160%,-80%) rotate(0deg)";
        setTimeout(function(){
            bowlcharole.style.visibility="hidden"
            bowlcharole2.style.visibility="visible"; 
            spoon1.style.transform="translate(-520%,-138%) rotate(0deg)";
            charcolefill2.style.transform="translate(-1100%,-370%) ";
            setTimeout(function(){
                  num.innerHTML="1gm";
                },1700)

            },1200)
            setTimeout(function(){
            spoon1.style.transform="translate(0%,0%) rotate(40deg)"
            update()
        },4500)
        m+=1;
    }

}
/***********************************step5 magnetic machine******************************************* */
var u ;
var mkk1=document.querySelector("#kk1")
var mkk2=document.querySelector("#kk2")
var mkk3=document.querySelector("#kk3")
var mkk4=document.querySelector("#kk4")
var mkk5=document.querySelector("#kk5")

var solb1 = document.querySelector("#black11")
var solb2 = document.querySelector("#black22")
var solb3 = document.querySelector("#black33")
var solb4 = document.querySelector("#black44")
var solb5 = document.querySelector("#black55")

var solbfi1 = document.querySelector("#blackfi1")
var solbfi2 = document.querySelector("#blackfi2")
var solbfi3 = document.querySelector("#blackfi3")
var solbfi4 = document.querySelector("#blackfi4")
var solbfi5 = document.querySelector("#blackfi5")
var buttonvisibe = document.querySelector("#red")
var buttonvisibeoff = document.querySelector("#blue")
var arrowvisible = document.querySelector("#arrow")
var arrowvisible0 = document.querySelector("#arrow0")
var arrowvisible1 = document.querySelector("#arrow1")
var rotatespeed = document.querySelector("#buttonspeed")
var meg = document.querySelector("#megnatic")
var meg1 = document.querySelector("#meg1")
var meg2 = document.querySelector("#meg2")
var meg3 = document.querySelector("#meg3")
var meg4 = document.querySelector("#meg4")
var meg5 = document.querySelector("#meg5")
var onmain = document.querySelector("#powerbuttonon")
var offmain = document.querySelector("#powerbuttonoff")
var offmach = document.querySelector("#machbuttonoff")
var onmach = document.querySelector("#machbuttonon")
var hand = document.querySelector("#hand")
var redlight = document.querySelector("#redlight")
var nobspeed = document.querySelector("#nobspeed")
var nobheat = document.querySelector("#nobheat")
var kk1=document.querySelector("kk1")
var kk2=document.querySelector("kk2")
var kk3=document.querySelector("kk3")
var kk4=document.querySelector("kk4")
var kk5=document.querySelector("kk5")



// hand.style.visibility = "visible";
hand.style.transform = "translate(-470%,-400%) rotate(90deg)"


function mainon() {
  if (u == 0) {
    hand.style.visibility = "visible";
    hand.style.transform = "translate(-460%,-880%)rotate(-180deg)"
    offmain.style.visibility = "hidden";
    onmain.style.visibility = "visible";
    redlight.style.visibility = "visible";
  //   setTimeout(function(){
  //     // kk1.style.visibility="visible"
  //     // kk2.style.visibility="visible"
  //     // kk3.style.visibility="visible"
  //     // kk4.style.visibility="visible"
  //     // kk5.style.visibility="visible"
  // },1000)
    update()
  }
  u += 1;
}

function machon() {
  if (u == 1) {

    offmach.style.visibility = "hidden";
    onmach.style.visibility = "visible";
    // screen.style.visibility="visible";
    hand.style.visibility = "visible";
    hand.style.transform = "translate(-760%,-880%)rotate(-180deg)"
    update()
  }
  u += 1;
}

function black1() {
  if (u == 2) {
    console.log(u);
    solb1.style.transform = "translate(-580%,-85%)";
    hand.style.visibility = "visible";
    hand.style.transform = "translate(-860%,-880%)rotate(-180deg)"
    update()
    u += 1;
  }
}
function black2() {
  if (u == 3) {
    console.log(u);
    solb2.style.transform = "translate(-590%,-85%)";
    update()
   // hand.style.visibility = "visible";
   // hand.style.transform = "translate(-960%,-880%)rotate(-180deg)"
  }
  u += 1;
}
function black3() {
  if (u == 4) {
    console.log(u);
    solb3.style.transform = "translate(-600%,-85%)";
    hand.style.visibility = "visible";
    hand.style.transform = "translate(-1050%,-880%)rotate(-180deg)"
    update()
  }
  u += 1;
}
function black4() {
  if (u == 5) {
    console.log(u);
    solb4.style.transform = "translate(-610%,-85%)";
    hand.style.visibility = "visible";
    hand.style.transform = "translate(-1150%,-880%)rotate(-180deg)"
    update()
  }
  u += 1;
}
function black5() {
  if (u == 6) {
    console.log(u);
    solb5.style.transform = "translate(-620%,-85%)";
    hand.style.visibility = "visible";
    hand.style.transform = "translate(-1150%,-850%)rotate(90deg)"
    setTimeout(function(){
      mkk1.style.visibility="hidden"
      mkk2.style.visibility="hidden"
      mkk3.style.visibility="hidden"
      mkk4.style.visibility="hidden"
      mkk5.style.visibility="hidden"
  },1000)
    update()

  }
  u =7;
}
function putmeg() {
  if (u == 7) {
    meg.style.visibility = "hidden"
    meg1.style.visibility = "visible"
    meg1.style.transform = "translate(0%,2000%)"
    meg2.style.visibility = "visible"
    meg2.style.transform = "translate(0%,2000%)"
    meg3.style.visibility = "visible"
    meg3.style.transform = "translate(0%,2000%)"
    meg4.style.visibility = "visible"
    meg4.style.transform = "translate(0%,2000%)"
    meg5.style.visibility = "visible"
    meg5.style.transform = "translate(0%,2000%)"
    hand.style.visibility = "visible";
    hand.style.transform = "translate(-560%,-880%)rotate(-180deg)"
    update()
  }
  u=8;
}
function nobhon() {
  if (u == 8) {
    console.log(u);
    nobheat.style.rotate = "-100deg";
    hand.style.visibility = "visible";
    hand.style.transform = "translate(-290%,-880%)rotate(-180deg)"
    update()
    

  }
  u = 9;
}
function nobson() {
  if (u == 9) {
    console.log(u);

    nobspeed.style.rotate = "-30deg";
    
          

      
        setTimeout(() => {
          solbfi1.style.visibility="visible"
          solbfi2.style.visibility="visible"
          solbfi3.style.visibility = "visible"
          solbfi4.style.visibility="visible"
          solbfi5.style.visibility="visible"

          solb1.style.visibility = "hidden"
          solb2.style.visibility = "hidden"
          solb3.style.visibility = "hidden"
          solb4.style.visibility = "hidden"
          solb5.style.visibility = "hidden"
          update()

        }, 1900);
      

  }
  pag=7;
  u += 1;
}
/********************************filter******************************************************* */


var uk ;
var filter1 = document.querySelector("#bflask11")
var filter2 = document.querySelector("#bflask22")
var filter3 = document.querySelector("#bflask33")
var filter4 = document.querySelector("#bflask44")
var filter5 = document.querySelector("#bflask55")
var blackdrp = document.querySelector("#bdrop11")
var bldrp11 =document.querySelector("#bldrpflask11")
var drop = document.querySelector("#drop11")
var filterdrp = document.querySelector("#fdrop11")
var ready = document.querySelector("#readyflask11")
var acflask1 = document.querySelector("#aceticflask11")
var acflask2 = document.querySelector("#aceticflask22")
var acflask3 = document.querySelector("#aceticflask33")
var acflask4 = document.querySelector("#aceticflask44")
var acflask5 = document.querySelector("#aceticflask55")
var blanck11 =document.querySelector("#blanckflask11")



function bflask1() {
  if (uk == 0) {
    console.log(u);
    filter1.style.transform = "translate(-200%,-200%) rotate(-80deg)";




    setTimeout(() => {
      bldrp11.style.visibility="visible"
      

    }, 900);
    setTimeout(() => {
      blackdrp.style.visibility = "visible"
      blanck11.style.visibility ="visible"
      filter1.style.opacity = "0%"
      bldrp11.style.visibility="hidden"
      blanck11.style.visibility ="hidden"
    
    }, 1200);

    setTimeout(() => {
      blackdrp.style.visibility = "hidden"
    }, 1900);
    setTimeout(()=>{
      drop.style.visibility = "hidden"
      drop.style.transform = "translate(0%,500%)"
    },2300);
    setTimeout(()=>{
    ready.style.visibility = "hidden"
      acflask1.style.visibility = "visible"
    },2800)
    setTimeout(() => {
      drop.style.visibility = "hidden"

    }, 1700);
    setTimeout(() => {
      drop.style.transform = "translate(0%,0%)"
    }, 1800);

    setTimeout(() => {
      filter1.style.opacity = "0%"
      update()
    }, 2000);
  }

}
function aceticflask1() {

  acflask1.style.transform = "translate(280%,0%)";

  uk+= 1;
  update()
}

function bflask2() {
  if (uk == 1) {
    console.log(u);
    filter2.style.transform = "translate(-310%,-200%) rotate(-80deg)";
    ready.style.visibility = "visible"



    setTimeout(() => {
      bldrp11.style.visibility="visible"
      

    }, 900);
    setTimeout(() => {
      blackdrp.style.visibility = "visible"
      blanck11.style.visibility ="visible"
      filter2.style.opacity = "0%"
      bldrp11.style.visibility="hidden"
      blanck11.style.visibility ="hidden"
    
    }, 1200);

    setTimeout(() => {
      blackdrp.style.visibility = "hidden"
    }, 1900);
    setTimeout(()=>{
      drop.style.visibility = "visible"
      drop.style.transform = "translate(0%,500%)"
    },2300);
    setTimeout(()=>{
    ready.style.visibility = "hidden"
      acflask2.style.visibility = "visible"
    },2800)
    setTimeout(() => {
      drop.style.visibility = "hidden"

    }, 1700);
    setTimeout(() => {
      drop.style.transform = "translate(0%,0%)"
    }, 1800);

    setTimeout(() => {
      filter2.style.opacity = "0%"
      update()
    }, 2000);
  }

}
function aceticflask2() {

  acflask2.style.transform = "translate(390%,0%)";
  update()
  uk+= 1;
}

function bflask3() {
  if (uk == 2) {
    console.log(u);
    filter3.style.transform = "translate(-430%,-200%) rotate(-80deg)";
    ready.style.visibility = "visible"



    setTimeout(() => {
      bldrp11.style.visibility="visible"
      

    }, 900);
    setTimeout(() => {
      blackdrp.style.visibility = "visible"
      blanck11.style.visibility ="visible"
      filter3.style.opacity = "0%"
      bldrp11.style.visibility="hidden"
      blanck11.style.visibility ="hidden"
    
    }, 1200);

    setTimeout(() => {
      blackdrp.style.visibility = "hidden"
    }, 1900);
    setTimeout(()=>{
      drop.style.visibility = "visible"
      drop.style.transform = "translate(0%,500%)"
    },2300);
    setTimeout(()=>{
    ready.style.visibility = "hidden"
      acflask3.style.visibility = "visible"
    },2800)
    setTimeout(() => {
      drop.style.visibility = "hidden"

    }, 1700);
    setTimeout(() => {
      drop.style.transform = "translate(0%,0%)"
    }, 1800);

    setTimeout(() => {
      filter3.style.opacity = "0%"
      update()
    }, 2000);
  }

}
function aceticflask3() {

  acflask3.style.transform = "translate(500%,0%)";
  uk+= 1;
  update()
}
function bflask4() {
  if (uk == 3) {
    console.log(u);
    filter4.style.transform = "translate(-560%,-200%) rotate(-80deg)";
    ready.style.visibility = "visible"



    setTimeout(() => {
      bldrp11.style.visibility="visible"
      

    }, 900);
    setTimeout(() => {
      blackdrp.style.visibility = "visible"
      blanck11.style.visibility ="visible"
      filter4.style.opacity = "0%"
      bldrp11.style.visibility="hidden"
      blanck11.style.visibility ="hidden"
    
    }, 1200);

    setTimeout(() => {
      blackdrp.style.visibility = "hidden"
    }, 1900);
    setTimeout(()=>{
      drop.style.visibility = "visible"
      drop.style.transform = "translate(0%,500%)"
    },2300);
    setTimeout(()=>{
    ready.style.visibility = "hidden"
      acflask4.style.visibility = "visible"
    },2800)
    setTimeout(() => {
      drop.style.visibility = "hidden"

    }, 1700);
    setTimeout(() => {
      drop.style.transform = "translate(0%,0%)"
    }, 1800);

    setTimeout(() => {
      filter4.style.opacity = "0%"
      update()
    }, 2000);
  }

}
function aceticflask4() {

  acflask4.style.transform = "translate(610%,0%)";
  uk+= 1;
  update()
}
function bflask5() {
  if (uk == 4) {
    console.log(u);
    filter5.style.transform = "translate(-680%,-200%) rotate(-80deg)";
    ready.style.visibility = "visible"



    setTimeout(() => {
      bldrp11.style.visibility="visible"
      

    }, 900);
    setTimeout(() => {
      blackdrp.style.visibility = "visible"
      blanck11.style.visibility ="visible"
      filter5.style.opacity = "0%"
      bldrp11.style.visibility="hidden"
      blanck11.style.visibility ="hidden"
    
    }, 1200);

    setTimeout(() => {
      blackdrp.style.visibility = "hidden"
    }, 1900);
    setTimeout(()=>{
      drop.style.visibility = "visible"
      drop.style.transform = "translate(0%,500%)"
    },2300);
    setTimeout(()=>{
    ready.style.visibility = "hidden"
      acflask5.style.visibility = "visible"
    },2800)
    setTimeout(() => {
      drop.style.visibility = "hidden"

    }, 1700);
    setTimeout(() => {
      drop.style.transform = "translate(0%,0%)"
    }, 1800);

    setTimeout(() => {
      filter5.style.opacity = "0%"
      update()
    }, 2000);
  }
  pag=8;

}
function aceticflask5() {

  acflask5.style.transform = "translate(720%,0%)";
  uk+= 1;
  update()
}


/*************************************************taitration last******************************** */

var v ;
var pf111 = document.querySelector("#p111")
var pf222 = document.querySelector("#p222")
var pf333 = document.querySelector("#p333")
var pf444 = document.querySelector("#p444")
var pf555 = document.querySelector("#p555")
var orglflask111 = document.querySelector("#f111");
var aq222= document.querySelector("#f222")
var aq333=document.querySelector("#f333")
var aq444=document.querySelector("#f444")
var aq555=document.querySelector("#f555v")
var drpt111 = document.querySelector("#droptaitration111")
var vol111=document.querySelector("#vol111")
var arrowbule222 =document.querySelector("#arrowblue222")
var arrowbule111 =document.querySelector("#arrowblue111")
var phand11=document.querySelector("#hand111")



function ti111() {
  if (v== 0) {
    console.log(s);
    orglflask111.style.transform = "translate(880%,0%) ";
    vol111.innerHTML="10";
   ireading111.innerHTML="0";
   phand11.style.visibility = "visible";
  phand11.style.transform = "translate(-1150%,-500%)rotate(90deg)"
 
     update()
  }
v=1
  
}

function titrate3rd() {
if (v == 1) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  v = 2;
}

else if (v == 2) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf111.style.opacity = "100%";
    orglflask111.style.visibility = "hidden";

    // ✅ Shake effect for pf111
    pf111.classList.remove("flask-shake");
    void pf111.offsetWidth;
    pf111.classList.add("flask-shake");

    update();
  }, 2500);

  v = 3;
}

else if (v == 5) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  v = 6;
}

else if (v == 6) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf222.style.opacity = "100%";
    aq222.style.visibility = "hidden";

    // ✅ Shake effect for pf222
    pf222.classList.remove("flask-shake");
    void pf222.offsetWidth;
    pf222.classList.add("flask-shake");

    update();
  }, 2500);

  v = 7;
}

else if (v == 9) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  v = 10;
}

else if (v == 10) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf333.style.opacity = "100%";
    aq333.style.visibility = "hidden";

    // ✅ Shake effect for pf333
    pf333.classList.remove("flask-shake");
    void pf333.offsetWidth;
    pf333.classList.add("flask-shake");

    update();
  }, 2500);

  v = 11;
}

else if (v == 13) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  v = 14;
}

else if (v == 14) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf444.style.opacity = "100%";
    aq444.style.visibility = "hidden";

    // ✅ Shake effect for pf444
    pf444.classList.remove("flask-shake");
    void pf444.offsetWidth;
    pf444.classList.add("flask-shake");

    update();
  }, 2500);

  v = 15;
}

else if (v == 17) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  v = 18;
}

else if (v == 18) {
  drpt111.style.visibility = "visible";
  drpt111.style.transform = "translate(0%,700%)";

  setTimeout(() => {
    drpt111.style.visibility = "hidden";
  }, 200);

  setTimeout(() => {
    drpt111.style.transform = "translate(0%,0%)";
  }, 1000);

  setTimeout(() => {
    pf555.style.opacity = "100%";
    aq555.style.visibility = "hidden";

    // ✅ Shake effect for pf555
    pf555.classList.remove("flask-shake");
    void pf555.offsetWidth;
    pf555.classList.add("flask-shake");

    update();
  }, 2500);

  v = 19;
}
  
  

}
function pi111(){
  if(v==3){
    pf111.style.transform = "translate(-880%,0%)";
  freading111.innerHTML="38.5";
  total111.innerHTML="38.5";
  Strength111.innerHTML="0.5";
  phand11.style.visibility = "visible";
  phand11.style.transform = "translate(-450%,-890%)rotate(180deg)"
   update()
    v=4;
  }
}
function pi222(){
  if(v==7){
    pf222.style.transform = "translate(-740%,0%)";
  freading222.innerHTML="	15.2	"
  total222.innerHTML="15.2"
  Strength222.innerHTML="0.336"
  phand11.style.visibility = "visible";
  phand11.style.transform = "translate(-550%,-890%)rotate(180deg)"
    update()
    v=8
  }
}
function pi333(){
  if(v==11){
    pf333.style.transform = "translate(-595%,0%)";
  freading333.innerHTML="	6.7	"
  total333.innerHTML="6.7"
  Strength333.innerHTML="0.22"
  phand11.style.visibility = "visible";
  phand11.style.transform = "translate(-700%,-890%)rotate(180deg)"
    update()
   
    v=12
    
  }
}
function pi444(){
  if(v==15){
    pf444.style.transform = "translate(-457%,0%)";
    freading444.innerHTML="	6	"
     total444.innerHTML="6"
     Strength444.innerHTML="0.125"
     phand11.style.visibility = "visible";
     phand11.style.transform = "translate(-800%,-890%)rotate(180deg)"
    update()
 
    v=16
    
  }
}
function pi555(){
  if(v==19){
    pf555.style.transform = "translate(-320%,0%)";
   freading555.innerHTML="2.5	"
    total555.innerHTML="2.5"
    Strength555.innerHTML="0.08"
    phand11.style.visibility = "hidden";
    update()
    pag=9;
   
    
    
  }
}





function ti222() {
  if (v== 4) {
    aq222.style.transform = "translate(750%,0%) ";
    phand11.style.visibility = "visible";
    phand11.style.transform = "translate(-1150%,-500%)rotate(90deg)"
    
    vol222.innerHTML="10"
    ireading222.innerHTML="0"
    update()
    v=5;

  }

}


function ti333() {
  if (v == 8) {
    aq333.style.transform = "translate(593%,0%) ";
    phand11.style.visibility = "visible";
    phand11.style.transform = "translate(-1150%,-500%)rotate(90deg)"
    
    vol333.innerHTML="10"
    ireading333.innerHTML="0"
 update()
 
v=9;
  }

}
function ti444() {
  if (v== 12) {
    aq444.style.transform = "translate(457%,0%) ";
    phand11.style.visibility = "visible";
    phand11.style.transform = "translate(-1150%,-500%)rotate(90deg)"
    vol444.innerHTML="10"
    ireading444.innerHTML="0"
    update()
    v=13;

  }

}
function ti555v() {
  if (v== 16) {
    aq555.style.transform = "translate(320%,0%) ";
    phand11.style.visibility = "visible";
    phand11.style.transform = "translate(-1150%,-500%)rotate(90deg)"
    vol555.innerHTML="10"
    ireading555.innerHTML="0"

    update()
    v=17;

  }

}




// ============================================================================
// COMPLETE AUTOMATION SYSTEM - BUILT FROM SCRATCH
// ============================================================================

// Automation state variables
let isAutoRunning = false;
let autoTimeouts = [];
let currentInstructionIndex = 0;
let currentPage = 'index';

// Main automation function
function startAutoSimulation() {
  if (isAutoRunning) {
    stopAutoSimulation();
    return;
  }
  
  console.log('🚀 Starting Complete Auto Simulation');
  
  // Initialize automation
  isAutoRunning = true;
  currentInstructionIndex = 0;
  
  // Update UI
  updateAutoButton(true);
  showAutoStatus('🚀 Starting automation...', 'info');
  
  // Hide all static results during automation
  hideAllResults();
  
  // Start the automation sequence
  executeInstructionSequence();
}

function stopAutoSimulation() {
  console.log('⏹️ Stopping Auto Simulation');
  
  isAutoRunning = false;
  
  // Clear all timeouts
  autoTimeouts.forEach(timeout => {
    if (timeout) clearTimeout(timeout);
  });
  autoTimeouts = [];
  
  // Reset UI
  updateAutoButton(false);
  hideAutoStatus();
}

function updateAutoButton(isRunning) {
  const btn = document.getElementById('autoStartBtn');
  if (btn) {
    if (isRunning) {
      btn.textContent = '⏹️ Stop Automation';
      btn.style.background = 'linear-gradient(45deg, #f44336, #d32f2f)';
    } else {
      btn.textContent = '🚀 Start Auto Simulation';
      btn.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
    }
  }
}

function showAutoStatus(message, type = 'info') {
  const status = document.getElementById('autoStatus');
  if (status) {
    status.textContent = message;
    status.classList.add('visible');
    status.className = `visible ${type}`;
  }
  
  // Also update instruction display
  const instructionUpdate = document.getElementById('update');
  if (instructionUpdate) {
    instructionUpdate.textContent = message;
  }
}

function hideAutoStatus() {
  const status = document.getElementById('autoStatus');
  if (status) {
    status.classList.remove('visible');
  }
}

function hideAllResults() {
  const resultElements = [
    '#submitresult', '#he0', '#image', '#table111', '#table222', '#table333',
    '#usertable', '#he1', '#he2', '#he3', '#he33', '#table111f', '#table2', '#table'
  ];
  
  resultElements.forEach(selector => {
    const elements = document.querySelectorAll(selector);
    elements.forEach(el => {
      if (el) {
        el.style.display = 'none';
        el.style.visibility = 'hidden';
      }
    });
  });
}

function showAllResults() {
  const resultElements = [
    '#submitresult', '#he0', '#image', '#table111', '#table222', '#table333',
    '#usertable', '#he1', '#he2', '#he3', '#he33', '#table111f', '#table2', '#table'
  ];
  
  resultElements.forEach(selector => {
    const elements = document.querySelectorAll(selector);
    elements.forEach(el => {
      if (el) {
        el.style.display = 'block';
        el.style.visibility = 'visible';
      }
    });
  });
}

// ============================================================================
// INSTRUCTION EXECUTION SYSTEM - FOLLOWING THE MESSAGE ARRAY
// ============================================================================

function executeInstructionSequence() {
  if (!isAutoRunning) return;
  
  // Use the existing message array as our instruction guide
  const totalInstructions = message.length;
  
  console.log(`📋 Starting automation with ${totalInstructions} instructions`);
  
  // Phase-based execution following the instruction messages
  const phases = [
    // Phase 1: Equipment Familiarization (messages 0)
    { 
      startIndex: 0, 
      endIndex: 0, 
      delay: 2000, 
      action: () => familiarizeWithEquipment(),
      message: "Familiarizing with laboratory equipment..."
    },
    
    // Phase 2: Oxalic Acid Solution Preparation (messages 1-7)
    { 
      startIndex: 1, 
      endIndex: 7, 
      delay: 20000, 
      action: () => prepareOxalicAcidSolutions(),
      message: "Preparing 3 separate oxalic acid solutions..."
    },
    
    // Phase 3: Phenolphthalein Addition (messages 8-11)
    { 
      startIndex: 8, 
      endIndex: 11, 
      delay: 50000, 
      action: () => addPhenolphthaleinToOxalic(),
      message: "Adding phenolphthalein indicator to oxalic acid..."
    },
    
    // Phase 4: S1, S2, S3 Titrations (messages 12-21)
    { 
      startIndex: 12, 
      endIndex: 21, 
      delay: 70000, 
      action: () => performStandardTitrations(),
      message: "Performing standard titrations (S1, S2, S3)..."
    },
    
    // Phase 5: Acetic Acid Preparation (messages 22-27)
    { 
      startIndex: 22, 
      endIndex: 27, 
      delay: 125000, // Triggered automatically by pink3() after standard titrations
      action: () => prepareAceticAcidSolutions(),
      message: "Step 5: Preparing acetic acid stock solutions..."
    },
    
    // Phase 6: Acetic Acid Titrations (messages 28-46)
    { 
      startIndex: 28, 
      endIndex: 46, 
      delay: 155000, // Triggered automatically after acetic acid preparation
      action: () => performAceticAcidTitrations(),
      message: "Step 6: Performing acetic acid titrations (U1-U5)..."
    },
    
    // Phase 7: Charcoal Weighing (messages 47-72)
    { 
      startIndex: 47, 
      endIndex: 72, 
      delay: 230000, 
      action: () => weighCharcoalPortions(),
      message: "Weighing charcoal portions..."
    },
    
    // Phase 8: Magnetic Stirring (messages 73-85)
    { 
      startIndex: 73, 
      endIndex: 85, 
      delay: 255000, 
      action: () => performMagneticStirring(),
      message: "Performing magnetic stirring..."
    },
    
    // Phase 9: Filtration (messages 86-95)
    { 
      startIndex: 86, 
      endIndex: 95, 
      delay: 280000, 
      action: () => filterSolutions(),
      message: "Filtering charcoal solutions..."
    },
    
    // Phase 10: Final Titrations and Results
    { 
      startIndex: 96, 
      endIndex: message.length - 1, 
      delay: 300000, 
      action: () => performFinalTitrationsAndResults(),
      message: "Performing final titrations and displaying results..."
    }
  ];
  
  // Execute each phase
  phases.forEach((phase, index) => {
    const timeout = setTimeout(() => {
      if (!isAutoRunning) return;
      
      showAutoStatus(`Phase ${index + 1}/10: ${phase.message}`, 'processing');
      console.log(`🔄 Phase ${index + 1}: ${phase.message}`);
      
      try {
        phase.action();
      } catch (error) {
        console.error(`❌ Error in phase ${index + 1}:`, error);
      }
    }, phase.delay);
    
    autoTimeouts.push(timeout);
  });
  
  // Final completion
  const completionTimeout = setTimeout(() => {
    if (isAutoRunning) {
      completeAutomation();
    }
  }, 210000); // Adjusted completion time
  
  autoTimeouts.push(completionTimeout);
}

// ============================================================================
// PHASE IMPLEMENTATIONS
// ============================================================================

function familiarizeWithEquipment() {
  // Message: "Make yourself familiar with the instruments by hovering over them"
  showAutoStatus('Familiarizing with laboratory equipment...', 'info');
  
  // First select language
  const engButton = document.getElementById('eng');
  if (engButton) {
    engButton.click();
    console.log('✅ Language selected: English');
  }
  
  // Hover over equipment with slower timing
  const equipmentItems = [
    '#hweingimage',          // Weighing machine
    '#hemptyconicalflask',   // Empty conical flask
    '#hroundflask1',         // Round flask 1
    '#hroundflask2',         // Round flask 2  
    '#haceticacidimage',     // Acetic acid
    '#hburetimage',          // Buret
    '#hfilterstand',         // Filter stand
    '#hmasurcylenderimage'   // Measuring cylinder
  ];
  
  equipmentItems.forEach((selector, index) => {
    setTimeout(() => {
      const element = document.querySelector(selector);
      if (element) {
        // Simulate hover by triggering mouseenter/mouseover events
        element.dispatchEvent(new MouseEvent('mouseenter', { bubbles: true }));
        element.dispatchEvent(new MouseEvent('mouseover', { bubbles: true }));
        console.log(`✅ Hovered over: ${selector}`);
        
        // Remove hover after delay
        setTimeout(() => {
          element.dispatchEvent(new MouseEvent('mouseleave', { bubbles: true }));
          element.dispatchEvent(new MouseEvent('mouseout', { bubbles: true }));
        }, 1500); // Each hover lasts 1.5 seconds
      }
    }, index * 1800); // 1.8 seconds between each hover
  });
  
  // Move to next page after equipment familiarization
  setTimeout(() => {
    showAutoStatus('✅ Equipment familiarization completed', 'success');
    if (typeof nextpage === 'function') {
      nextpage();
      console.log('✅ Moved to solution preparation');
    }
  }, (equipmentItems.length * 1800) + 2000); // Wait for all hovers + extra time
}

function prepareOxalicAcidSolutions() {
  // Messages 1-7: Prepare 3 separate 10ML oxalic acid solutions
  // Flow: Oxalic acid flask → measuring cylinder → auto-transfer to conical flask (3 times)
  showAutoStatus('Preparing 3 separate oxalic acid solutions...', 'processing');
  
  // Initialize the step counter properly
  if (typeof s === 'undefined') {
    window.s = 1;
  } else {
    s = 1; // Reset to start
  }
  
  console.log('🧪 Starting oxalic acid preparation, s =', s);
  
  // Solution 1: Oxalic Acid Flask → Measuring Cylinder → Conical Flask 1
  setTimeout(() => {
    showAutoStatus('Step 1: Adding oxalic acid to measuring cylinder...', 'processing');
    clickElement('#flask1', 'Clicking oxalic acid flask for solution 1');
  }, 1500);
  
  setTimeout(() => {
    showAutoStatus('Step 2: Transferring to conical flask 1...', 'processing');
    clickElement('#masurcylender', 'Transferring to conical flask 1');
  }, 5500); // Wait for flask animation to complete
  
  // Solution 2: Oxalic Acid Flask → Measuring Cylinder → Conical Flask 2
  setTimeout(() => {
    showAutoStatus('Step 3: Adding oxalic acid to measuring cylinder...', 'processing');
    clickElement('#sol0', 'Clicking solution flask for solution 2');
  }, 9500);
  
  setTimeout(() => {
    showAutoStatus('Step 4: Transferring to conical flask 2...', 'processing');
    clickElement('#masurcylender', 'Transferring to conical flask 2');
  }, 13500);
  
  // Solution 3: Oxalic Acid Flask → Measuring Cylinder → Conical Flask 3
  setTimeout(() => {
    showAutoStatus('Step 5: Adding oxalic acid to measuring cylinder...', 'processing');
    clickElement('#sol1', 'Clicking solution flask for solution 3');
  }, 17500);
  
  setTimeout(() => {
    showAutoStatus('Step 6: Transferring to conical flask 3...', 'processing');
    clickElement('#masurcylender', 'Transferring to conical flask 3');
  }, 21500);
  
  // Show completion message
  setTimeout(() => {
    showAutoStatus('✅ All 3 oxalic acid solutions prepared in conical flasks', 'success');
    console.log('🎉 Oxalic acid preparation completed, final s =', s);
  }, 25000);
}

function addPhenolphthaleinToOxalic() {
  // Messages 8-11: Add phenolphthalein indicator multiple times
  showAutoStatus('Adding phenolphthalein indicator...', 'processing');
  
  // Move to indicator page first
  setTimeout(() => {
    if (typeof nextpage === 'function') {
      nextpage();
      console.log('✅ Moved to indicator addition step');
    }
  }, 1000);
  
  // Initialize the indicator variable
  setTimeout(() => {
    if (typeof f === 'undefined') {
      window.f = 0;
    } else {
      f = 0; // Reset for proper sequence
    }
    console.log('🧪 Starting phenolphthalein addition, f =', f);
  }, 2000);
  
  // Add indicator 1: Call act1() directly (f=0)
  setTimeout(() => {
    showAutoStatus('Adding phenolphthalein to solution 1...', 'processing');
    if (typeof act1 === 'function') {
      act1();
      console.log('✅ Called act1() for first solution');
    }
  }, 4000);
  
  // Add indicator 2: Call act2() directly (f=1)  
  setTimeout(() => {
    showAutoStatus('Adding phenolphthalein to solution 2...', 'processing');
    if (typeof act2 === 'function') {
      act2();
      console.log('✅ Called act2() for second solution');
    }
  }, 8000);
  
  // Add indicator 3: Call act3() directly (f=2)
  setTimeout(() => {
    showAutoStatus('Adding phenolphthalein to solution 3...', 'processing');
    if (typeof act3 === 'function') {
      act3();
      console.log('✅ Called act3() for third solution');
    }
  }, 12000);
  
  // Show completion message
  setTimeout(() => {
    showAutoStatus('✅ Phenolphthalein indicator added to all solutions', 'success');
    console.log('🎉 Phenolphthalein addition completed, final f =', f);
  }, 16000);
}

function performStandardTitrations() {
  // Messages 12-21: S1, S2, S3 titrations
  showAutoStatus('Performing standard titrations...', 'processing');
  
  // Move to titration page
  setTimeout(() => {
    if (typeof nextpage === 'function') {
      nextpage();
      console.log('✅ Moved to titration step');
    }
  }, 1000);
  
  // Initialize the titration variable
  setTimeout(() => {
    if (typeof k === 'undefined') {
      window.k = 0;
    } else {
      k = 0; // Reset for proper sequence
    }
    console.log('🧪 Starting standard titrations, k =', k);
  }, 2000);
  
  // S1 Titration - Complete sequence (k: 0→1→2→3→4)
  setTimeout(() => {
    showAutoStatus('S1 Titration: Selecting first oxalic acid solution...', 'processing');
    k = 0; // Ensure correct state
    if (typeof titration1 === 'function') {
      titration1(); // k becomes 1
      console.log('✅ S1 flask selected and moved, k =', k);
    }
  }, 4000);
  
  setTimeout(() => {
    showAutoStatus('S1 Titration: Adding NaOH drops...', 'processing');
    if (typeof titrate === 'function') {
      titrate(); // k: 1→2, shows drops
      console.log('✅ S1 first NaOH drops added, k =', k);
    }
  }, 7000);
  
  setTimeout(() => {
    showAutoStatus('S1 Titration: Solution turning pink...', 'processing');
    if (typeof titrate === 'function') {
      titrate(); // k: 2→3, shows pink color and hides original flask
      console.log('✅ S1 solution turned pink, k =', k);
    }
  }, 10000);
  
  setTimeout(() => {
    showAutoStatus('S1 Titration: Moving pink flask back...', 'processing');
    if (typeof pink1 === 'function') {
      pink1(); // k: 3→4, moves pink flask back
      console.log('✅ S1 pink flask moved back, k =', k);
    }
  }, 13000);
  
  setTimeout(() => {
    showAutoStatus('✅ S1 Titration completed successfully', 'success');
    console.log('✅ S1 titration completed, k =', k);
  }, 16000);
  
  // S2 Titration - Complete sequence (k: 4→5→6→7→8)
  setTimeout(() => {
    showAutoStatus('S2 Titration: Selecting second oxalic acid solution...', 'processing');
    k = 4; // Set correct state for titration2
    if (typeof titration2 === 'function') {
      titration2(); // k becomes 5
      console.log('✅ S2 flask selected and moved, k =', k);
    }
  }, 19000);
  
  setTimeout(() => {
    showAutoStatus('S2 Titration: Adding NaOH drops...', 'processing');
    if (typeof titrate === 'function') {
      titrate(); // k: 5→6, shows drops
      console.log('✅ S2 first NaOH drops added, k =', k);
    }
  }, 22000);
  
  setTimeout(() => {
    showAutoStatus('S2 Titration: Solution turning pink...', 'processing');
    if (typeof titrate === 'function') {
      titrate(); // k: 6→7, shows pink color and hides original flask
      console.log('✅ S2 solution turned pink, k =', k);
    }
  }, 25000);
  
  setTimeout(() => {
    showAutoStatus('S2 Titration: Moving pink flask back...', 'processing');
    if (typeof pink2 === 'function') {
      pink2(); // k: 7→8, moves pink flask back
      console.log('✅ S2 pink flask moved back, k =', k);
    }
  }, 28000);
  
  setTimeout(() => {
    showAutoStatus('✅ S2 Titration completed successfully', 'success');
    console.log('✅ S2 titration completed, k =', k);
  }, 31000);
  
  // S3 Titration - Complete sequence (k: 8→9→10→11)
  setTimeout(() => {
    showAutoStatus('S3 Titration: Selecting third oxalic acid solution...', 'processing');
    k = 8; // Set correct state for titration3
    if (typeof titration3 === 'function') {
      titration3(); // k becomes 9
      console.log('✅ S3 flask selected and moved, k =', k);
    }
  }, 34000);
  
  setTimeout(() => {
    showAutoStatus('S3 Titration: Adding NaOH drops...', 'processing');
    if (typeof titrate === 'function') {
      titrate(); // k: 9→10, shows drops
      console.log('✅ S3 first NaOH drops added, k =', k);
    }
  }, 37000);
  
  setTimeout(() => {
    showAutoStatus('S3 Titration: Solution turning pink...', 'processing');
    if (typeof titrate === 'function') {
      titrate(); // k: 10→11, shows pink color and hides original flask
      console.log('✅ S3 solution turned pink, k =', k);
    }
  }, 40000);
  
  setTimeout(() => {
    showAutoStatus('S3 Titration: Moving pink flask back...', 'processing');
    if (typeof pink3 === 'function') {
      pink3(); // This will now automatically trigger step 5 transition
      console.log('✅ S3 pink flask moved back and step 5 transition initiated');
    }
  }, 43000);
  
  setTimeout(() => {
    showAutoStatus('✅ Standard Titrations completed - Step 5 starting automatically', 'success');
    console.log('🎉 Standard titrations completed, step 5 should be active');
  }, 46000);
}

function prepareAceticAcidSolutions() {
  // Messages 22-27: Prepare acetic acid stock solutions with phenolphthalein
  showAutoStatus('Step 5: Preparing acetic acid stock solutions...', 'processing');
  
  // The transition should already be handled by pink3() function
  console.log('🧪 Starting acetic acid preparation phase');
  
  // Initialize the indicator variable for acetic acid
  setTimeout(() => {
    if (typeof q === 'undefined') {
      window.q = 0;
    } else {
      q = 0; // Reset for proper sequence
    }
    console.log('🧪 Acetic acid preparation initialized, q =', q);
  }, 2000);
  
  // Add indicator to 5 acetic acid solutions using the correct functions
  setTimeout(() => {
    showAutoStatus('Adding phenolphthalein to acetic acid solution 1...', 'processing');
    if (typeof droper1 === 'function') {
      droper1();
      console.log('✅ Called droper1() for acetic acid solution 1');
    }
  }, 4000);
  
  setTimeout(() => {
    showAutoStatus('Adding phenolphthalein to acetic acid solution 2...', 'processing');
    if (typeof droper2 === 'function') {
      droper2();
      console.log('✅ Called droper2() for acetic acid solution 2');
    }
  }, 8000);
  
  setTimeout(() => {
    showAutoStatus('Adding phenolphthalein to acetic acid solution 3...', 'processing');
    if (typeof droper3 === 'function') {
      droper3();
      console.log('✅ Called droper3() for acetic acid solution 3');
    }
  }, 12000);
  
  setTimeout(() => {
    showAutoStatus('Adding phenolphthalein to acetic acid solution 4...', 'processing');
    if (typeof droper4 === 'function') {
      droper4();
      console.log('✅ Called droper4() for acetic acid solution 4');
    }
  }, 16000);
  
  setTimeout(() => {
    showAutoStatus('Adding phenolphthalein to acetic acid solution 5...', 'processing');
    if (typeof droper5 === 'function') {
      droper5();
      console.log('✅ Called droper5() for acetic acid solution 5');
    }
  }, 20000);
  
  // Show completion message and trigger step 6
  setTimeout(() => {
    showAutoStatus('✅ Step 5 completed - Starting Step 6 (Acetic Acid Titrations)', 'success');
    console.log('🎉 Acetic acid preparation completed, triggering step 6');
    
    // Force transition to step 6 (acetic acid titrations)
    setTimeout(() => {
      pag = 4;
      if (typeof nextpage === 'function') {
        nextpage();
        console.log('🔄 Transitioned to step 6 (acetic acid titrations), pag =', pag);
      }
    }, 1000);
  }, 24000);
}

function performAceticAcidTitrations() {
  // Messages 28-46: U1-U5 titrations
  showAutoStatus('Step 6: Performing acetic acid titrations (U1-U5)...', 'processing');
  
  console.log('🧪 Starting acetic acid titrations phase');
  
  // Initialize titration variables
  setTimeout(() => {
    if (typeof p === 'undefined') {
      window.p = 0;
    } else {
      p = 0; // Reset for proper sequence
    }
    console.log('🧪 Acetic acid titrations initialized, p =', p);
  }, 2000);
  
  // U1 Titration - Complete sequence (p: 0→1→2→3→4)
  setTimeout(() => {
    showAutoStatus('U1 Titration: Selecting first acetic acid flask...', 'processing');
    p = 0; // Ensure correct state
    if (typeof ti1 === 'function') {
      ti1(); // p becomes 1
      console.log('✅ U1 flask selected and moved, p =', p);
    }
  }, 4000);
  
  setTimeout(() => {
    showAutoStatus('U1 Titration: Adding NaOH drops...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 1→2, shows drops
      console.log('✅ U1 first NaOH drops added, p =', p);
    }
  }, 7000);
  
  setTimeout(() => {
    showAutoStatus('U1 Titration: Solution turning pink...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 2→3, shows pink color and hides original flask
      console.log('✅ U1 solution turned pink, p =', p);
    }
  }, 10000);
  
  setTimeout(() => {
    showAutoStatus('U1 Titration: Moving pink flask back to original position...', 'processing');
    if (typeof pi1 === 'function') {
      pi1();
      console.log('✅ Called pi1(), p should now be 4, actual p =', p);
    }
  }, 13000);
  
  setTimeout(() => {
    showAutoStatus('✅ U1 Titration completed successfully', 'success');
    console.log('✅ U1 titration completed, p =', p);
  }, 16000);
  
  // U2 Titration - Complete sequence (p: 4→5→6→7→8)
  setTimeout(() => {
    showAutoStatus('U2 Titration: Selecting second acetic acid flask...', 'processing');
    p = 4; // Set correct state for U2
    if (typeof ti2 === 'function') {
      ti2(); // p becomes 5
      console.log('✅ U2 flask selected and moved, p =', p);
    }
  }, 19000);
  
  setTimeout(() => {
    showAutoStatus('U2 Titration: Adding NaOH drops...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 5→6, shows drops
      console.log('✅ U2 first NaOH drops added, p =', p);
    }
  }, 22000);
  
  setTimeout(() => {
    showAutoStatus('U2 Titration: Solution turning pink...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 6→7, shows pink color and hides original flask
      console.log('✅ U2 solution turned pink, p =', p);
    }
  }, 25000);
  
  setTimeout(() => {
    showAutoStatus('U2 Titration: Moving pink flask back...', 'processing');
    if (typeof pi2 === 'function') {
      pi2(); // p: 7→8, moves pink flask back
      console.log('✅ U2 pink flask moved back, p =', p);
    }
  }, 28000);
  
  setTimeout(() => {
    showAutoStatus('✅ U2 Titration completed successfully', 'success');
    console.log('✅ U2 titration completed, p =', p);
  }, 31000);
  
  // U3 Titration - Complete sequence (p: 8→9→10→11→12)
  setTimeout(() => {
    showAutoStatus('U3 Titration: Selecting third acetic acid flask...', 'processing');
    p = 8; // Set correct state for U3
    if (typeof ti3 === 'function') {
      ti3(); // p becomes 9
      console.log('✅ U3 flask selected and moved, p =', p);
    }
  }, 34000);
  
  setTimeout(() => {
    showAutoStatus('U3 Titration: Adding NaOH drops...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 9→10, shows drops
      console.log('✅ U3 first NaOH drops added, p =', p);
    }
  }, 37000);
  
  setTimeout(() => {
    showAutoStatus('U3 Titration: Solution turning pink...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 10→11, shows pink color and hides original flask
      console.log('✅ U3 solution turned pink, p =', p);
    }
  }, 40000);
  
  setTimeout(() => {
    showAutoStatus('U3 Titration: Moving pink flask back...', 'processing');
    if (typeof pi3 === 'function') {
      pi3(); // p: 11→12, moves pink flask back
      console.log('✅ U3 pink flask moved back, p =', p);
    }
  }, 43000);
  
  setTimeout(() => {
    showAutoStatus('✅ U3 Titration completed successfully', 'success');
    console.log('✅ U3 titration completed, p =', p);
  }, 46000);
  
  // U4 Titration - Complete sequence (p: 12→13→14→15→16)
  setTimeout(() => {
    showAutoStatus('U4 Titration: Selecting fourth acetic acid flask...', 'processing');
    p = 12; // Set correct state for U4
    if (typeof ti4 === 'function') {
      ti4(); // p becomes 13
      console.log('✅ U4 flask selected and moved, p =', p);
    }
  }, 49000);
  
  setTimeout(() => {
    showAutoStatus('U4 Titration: Adding NaOH drops...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 13→14, shows drops
      console.log('✅ U4 first NaOH drops added, p =', p);
    }
  }, 52000);
  
  setTimeout(() => {
    showAutoStatus('U4 Titration: Solution turning pink...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 14→15, shows pink color and hides original flask
      console.log('✅ U4 solution turned pink, p =', p);
    }
  }, 55000);
  
  setTimeout(() => {
    showAutoStatus('U4 Titration: Moving pink flask back...', 'processing');
    if (typeof pi4 === 'function') {
      pi4(); // p: 15→16, moves pink flask back
      console.log('✅ U4 pink flask moved back, p =', p);
    }
  }, 58000);
  
  setTimeout(() => {
    showAutoStatus('✅ U4 Titration completed successfully', 'success');
    console.log('✅ U4 titration completed, p =', p);
  }, 61000);
  
  // U5 Titration - Complete sequence (p: 16→17→18→19→20)
  setTimeout(() => {
    showAutoStatus('U5 Titration: Selecting fifth acetic acid flask...', 'processing');
    p = 16; // Set correct state for U5
    if (typeof ti5v === 'function') {
      ti5v(); // p becomes 17
      console.log('✅ U5 flask selected and moved, p =', p);
    }
  }, 64000);
  
  setTimeout(() => {
    showAutoStatus('U5 Titration: Adding NaOH drops...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 17→18, shows drops
      console.log('✅ U5 first NaOH drops added, p =', p);
    }
  }, 67000);
  
  setTimeout(() => {
    showAutoStatus('U5 Titration: Solution turning pink...', 'processing');
    if (typeof titrate5f === 'function') {
      titrate5f(); // p: 18→19, shows pink color and hides original flask
      console.log('✅ U5 solution turned pink, p =', p);
    }
  }, 70000);
  
  setTimeout(() => {
    showAutoStatus('U5 Titration: Moving pink flask back...', 'processing');
    if (typeof pi5 === 'function') {
      pi5(); // p: 19→20, moves pink flask back
      console.log('✅ U5 pink flask moved back, p =', p);
    }
  }, 73000);
  
  setTimeout(() => {
    showAutoStatus('✅ U5 Titration completed successfully', 'success');
    console.log('✅ U5 titration completed, p =', p);
  }, 76000);
  
  setTimeout(() => {
    showAutoStatus('✅ All acetic acid titrations (U1-U5) completed', 'success');
    console.log('🎉 Acetic acid titrations phase completed');
    
    // Automatically transition to weighing charcoal step
    setTimeout(() => {
      showAutoStatus('🔄 Transitioning to charcoal weighing step...', 'info');
      console.log('🔄 Auto-transitioning to weighing charcoal');
      
      // Force page transition to weighing step
      pag = 5;
      if (typeof nextpage === 'function') {
        nextpage();
        console.log('✅ Moved to weighing step automatically');
      }
      
      // Start charcoal weighing automation after a brief delay
      setTimeout(() => {
        automateWeighingMachine();
      }, 3000);
      
    }, 2000);
  }, 79000);
}

function weighCharcoalPortions() {
  // Messages 47-72: Weighing 1gm charcoal for each solution
  showAutoStatus('Starting charcoal weighing process...', 'processing');
  console.log('🔧 Starting weighCharcoalPortions - calling proper weighing automation');
  
  // Call the proper automated weighing machine function
  // This function handles all the sequential weighing for 5 solutions
  // with proper function calls and state management
  automateWeighingMachine();
}

function performMagneticStirring() {
  // Messages 73-85: Magnetic stirring setup and operation
  showAutoStatus('Setting up magnetic stirring...', 'processing');
  
  // Move to stirring page
  setTimeout(() => {
    if (typeof nextpage === 'function') {
      nextpage();
      console.log('✅ Moved to magnetic stirring step');
    }
  }, 1000);
  
  const stirringSequence = [
    { selector: '#mainswitch', delay: 3000, message: 'Turning on main switch' },
    { selector: '#powerbutton', delay: 5000, message: 'Turning on power button' },
    { selector: '#flask1', delay: 7000, message: 'Placing flask 1' },
    { selector: '#flask2', delay: 9000, message: 'Placing flask 2' },
    { selector: '#flask3', delay: 11000, message: 'Placing flask 3' },
    { selector: '#flask4', delay: 13000, message: 'Placing flask 4' },
    { selector: '#flask5', delay: 15000, message: 'Placing flask 5' },
    { selector: '#magnet', delay: 17000, message: 'Adding magnetic stirrer' },
    { selector: '#heatswitch', delay: 19000, message: 'Setting temperature' },
    { selector: '#speedswitch', delay: 21000, message: 'Setting mixing speed' }
  ];
  
  stirringSequence.forEach(action => {
    setTimeout(() => {
      clickElement(action.selector, action.message);
    }, action.delay);
  });
}

function filterSolutions() {
  // Messages 86-95: Filter charcoal solutions
  showAutoStatus('Filtering charcoal solutions...', 'processing');
  
  // Move to filtration page
  setTimeout(() => {
    if (typeof nextpage === 'function') {
      nextpage();
      console.log('✅ Moved to filtration step');
    }
  }, 1000);
  
  // Filter 5 solutions
  for (let i = 1; i <= 5; i++) {
    const baseDelay = 2000 + ((i - 1) * 3000);
    setTimeout(() => {
      clickElement(`#k${i}flask`, `K${i} flask filtration`);
      setTimeout(() => {
        clickElement(`#filteredsolution${i}`, `Filtered solution ${i}`);
      }, 1500);
    }, baseDelay);
  }
}

function performFinalTitrationsAndResults() {
  // Final titrations and show results
  showAutoStatus('🧪 Performing final titrations and calculations...', 'processing');
  
  // Move to final page if needed
  setTimeout(() => {
    console.log('📄 Moving to final results page...');
    if (typeof nextpage === 'function') {
      nextpage();
      console.log('✅ Moved to final titrations/results page, current pag =', pag);
    }
  }, 1000);
  
  // Continue moving through pages until we reach the final results page
  setTimeout(() => {
    console.log('📄 Checking current page for results... pag =', pag);
    
    // Keep moving forward until we reach the final results page (pag=9)
    const moveToResultsPage = () => {
      if (pag < 9 && typeof nextpage === 'function') {
        console.log('📄 Moving forward to results page, current pag =', pag);
        nextpage();
        setTimeout(moveToResultsPage, 1000);
      } else {
        console.log('📊 Reached final results page, pag =', pag);
        showAutoStatus('📊 Calculating final results and filling tables...', 'processing');
      }
    };
    
    moveToResultsPage();
  }, 3000);
  
  // Show final results tables after enough time for calculations
  setTimeout(() => {
    console.log('📊 Displaying all result tables with calculated values...');
    showAutoStatus('📋 Displaying complete result tables with values...', 'info');
    showAllResults();
    
    // Ensure we're on the right page for results
    if (pag !== 9) {
      console.log('🔧 Force setting page to 9 for results display');
      pag = 9;
      if (typeof update === 'function') {
        update();
      }
    }
    
    // Additional result display
    setTimeout(() => {
      showAutoStatus('🎉 Experiment completed! All result tables are now visible with calculated values.', 'success');
      console.log('✅ All result tables should now be visible with filled values');
    }, 2000);
    
  }, 10000);
}

function completeAutomation() {
  console.log('🎉 Completing automation - showing final results');
  showAutoStatus('✅ Full automation completed successfully! 🎉', 'success');
  
  // Ensure we're on the results page and all results are displayed
  setTimeout(() => {
    console.log('📊 Final check - ensuring results are displayed...');
    
    // Force to results page if not already there
    if (pag !== 9) {
      console.log('🔧 Force setting to results page (pag=9)');
      pag = 9;
      if (typeof update === 'function') {
        update();
      }
    }
    
    // Show all results
    showAllResults();
    showAutoStatus('📊 Results displayed! All experiment data is now visible in tables.', 'success');
    
    console.log('📋 Results should now be visible:', {
      currentPage: pag,
      resultTablesShown: true
    });
    
  }, 2000);
  
  // Keep automation status visible longer and update the button
  setTimeout(() => {
    console.log('🔄 Automation completed, results remain visible');
    showAutoStatus('✅ Experiment Complete! Results are displayed above. 📊', 'success');
    
    // Update button but keep results visible
    updateAutoButton(false);
    isAutoRunning = false;
    
    // Final message to user
    setTimeout(() => {
      showAutoStatus('📋 All experiment tables filled with calculated values. Analysis complete! 🎉', 'success');
    }, 2000);
    
  }, 8000);
}

// ============================================================================
// UTILITY FUNCTIONS
// ============================================================================

function clickElement(selector, description) {
  const element = document.querySelector(selector);
  if (element && element.onclick && isAutoRunning) {
    try {
      element.onclick();
      console.log(`✅ Clicked: ${selector} (${description})`);
    } catch (error) {
      console.warn(`⚠️ Error clicking ${selector}:`, error);
    }
  } else if (!element) {
    console.warn(`⚠️ Element not found: ${selector}`);
  }
}

// ============================================================================
// INITIALIZATION
// ============================================================================

document.addEventListener('DOMContentLoaded', function() {
  hideAllResults();
  console.log('🔧 Complete automation system initialized');
});

window.addEventListener('load', function() {
  setTimeout(() => {
    hideAllResults();
  }, 100);
});

// ============================================================================
// ENHANCED AUTOMATION FOR REMAINING FUNCTIONS
// ============================================================================

// FIXED: Enhanced weighing machine automation with correct function calls
function automateWeighingMachine() {
  if (!isAutoRunning) return;
  
  console.log('🔧 Starting automated weighing machine process');
  showAutoStatus('🏭 Starting weighing machine for 1gm Charcoal...', 'processing');
  
  // Ensure we're on the correct page first
  if (typeof pag !== 'undefined' && pag !== 5) {
    console.log('📄 Setting page to 5 for weighing step');
    pag = 5;
    if (typeof nextpage === 'function') {
      nextpage();
    }
  }
  
  // Initialize weighing variables properly
  if (typeof m === 'undefined') {
    window.m = 1;
  } else {
    m = 1;
  }
  
  console.log('🔧 Weighing machine initialized, m =', m, 'pag =', pag);
  
  // Step 1: Turn on weighing machine
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚡ Step 1: Turning on weighing machine...', 'processing');
    console.log('🔧 About to call onbutton(), m =', m);
    if (typeof onbutton === 'function') {
      onbutton(); // m becomes 2
      console.log('✅ Weighing machine turned on, m =', m);
    }
  }, 2000);
  
  // SOLUTION 1 - Complete weighing cycle (m: 2→3→4→5→6→7)
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('📦 Solution 1/5: Step 2 - Placing empty Petri dish on scale...', 'processing');
    console.log('🔧 About to call bowlput() for solution 1, m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 2→3
      console.log('✅ Solution 1: Empty petri dish placed, m =', m);
    }
  }, 4000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚖️ Solution 1/5: Step 3 - Clicking tare button to zero the scale...', 'processing');
    console.log('🔧 About to call tarebutton() for solution 1, m =', m);
    if (typeof tarebutton === 'function') {
      tarebutton(); // m: 3→4
      console.log('✅ Solution 1: Tare button clicked, m =', m);
    }
  }, 6500);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 1/5: Step 4 - Using spatula to collect charcoal (1st time)...', 'processing');
    console.log('🔧 About to call spoonput() first time for solution 1, m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 4→5
      console.log('✅ Solution 1: First spatula use, m =', m);
    }
  }, 9000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 1/5: Step 5 - Using spatula again to get exact 1gm (2nd time)...', 'processing');
    console.log('🔧 About to call spoonput() second time for solution 1, m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 5→6
      console.log('✅ Solution 1: Second spatula use, m =', m);
    }
  }, 14000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚗️ Solution 1/5: Step 6 - Pouring 1gm charcoal into acetic acid solution...', 'processing');
    console.log('🔧 About to call bowlput() to pour solution 1, m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 6→7
      console.log('✅ Solution 1: Charcoal poured into solution, m =', m);
    }
  }, 19000);
  
  // SOLUTION 2 - Complete weighing cycle (m: 7→8→9→10→11→12)
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('📦 Solution 2/5: Step 2 - Placing empty Petri dish on scale...', 'processing');
    console.log('🔧 About to call bowlput() for solution 2, m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 7→8
      console.log('✅ Solution 2: Empty petri dish placed, m =', m);
    }
  }, 24000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚖️ Solution 2/5: Step 3 - Clicking tare button to zero the scale...', 'processing');
    console.log('🔧 About to call tarebutton() for solution 2, m =', m);
    if (typeof tarebutton === 'function') {
      tarebutton(); // m: 8→9
      console.log('✅ Solution 2: Tare button clicked, m =', m);
    }
  }, 26500);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 2/5: Step 4 - Using spatula to collect charcoal (1st time)...', 'processing');
    console.log('🔧 About to call spoonput() first time for solution 2, m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 9→10
      console.log('✅ Solution 2: First spatula use, m =', m);
    }
  }, 29000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 2/5: Step 5 - Using spatula again to get exact 1gm (2nd time)...', 'processing');
    console.log('🔧 About to call spoonput() second time for solution 2, m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 10→11
      console.log('✅ Solution 2: Second spatula use, m =', m);
    }
  }, 34000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚗️ Solution 2/5: Step 6 - Pouring 1gm charcoal into acetic acid solution...', 'processing');
    console.log('🔧 About to call bowlput() to pour solution 2, m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 11→12
      console.log('✅ Solution 2: Charcoal poured into solution, m =', m);
    }
  }, 39000);
  
  // SOLUTION 3 - Complete weighing cycle (m: 12→13→14→15→16→17)
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('📦 Solution 3/5: Step 2 - Placing empty Petri dish on scale...', 'processing');
    console.log('🔧 About to call bowlput() for solution 3, m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 12→13
      console.log('✅ Solution 3: Empty petri dish placed, m =', m);
    }
  }, 44000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚖️ Solution 3/5: Step 3 - Clicking tare button to zero the scale...', 'processing');
    console.log('🔧 About to call tarebutton() for solution 3, m =', m);
    if (typeof tarebutton === 'function') {
      tarebutton(); // m: 13→14
      console.log('✅ Solution 3: Tare button clicked, m =', m);
    }
  }, 46500);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 3/5: Step 4 - Using spatula to collect charcoal (1st time)...', 'processing');
    console.log('🔧 About to call spoonput() first time for solution 3, m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 14→15
      console.log('✅ Solution 3: First spatula use, m =', m);
    }
  }, 49000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 3/5: Step 5 - Using spatula again to get exact 1gm (2nd time)...', 'processing');
    console.log('🔧 About to call spoonput() second time for solution 3, m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 15→16
      console.log('✅ Solution 3: Second spatula use, m =', m);
    }
  }, 54000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚗️ Solution 3/5: Step 6 - Pouring 1gm charcoal into acetic acid solution...', 'processing');
    console.log('🔧 About to call bowlput() to pour solution 3, m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 16→17
      console.log('✅ Solution 3: Charcoal poured into solution, m =', m);
    }
  }, 59000);
  
  // SOLUTION 4 - Complete weighing cycle (m: 17→18→19→20→21→22)
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('📦 Solution 4/5: Step 2 - Placing empty Petri dish on scale...', 'processing');
    console.log('🔧 About to call bowlput() for solution 4, m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 17→18
      console.log('✅ Solution 4: Empty petri dish placed, m =', m);
    }
  }, 64000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚖️ Solution 4/5: Step 3 - Clicking tare button to zero the scale...', 'processing');
    console.log('🔧 About to call tarebutton() for solution 4, m =', m);
    if (typeof tarebutton === 'function') {
      tarebutton(); // m: 18→19
      console.log('✅ Solution 4: Tare button clicked, m =', m);
    }
  }, 66500);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 4/5: Step 4 - Using spatula to collect charcoal (1st time)...', 'processing');
    console.log('🔧 About to call spoonput() first time for solution 4, m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 19→20
      console.log('✅ Solution 4: First spatula use, m =', m);
    }
  }, 69000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 4/5: Step 5 - Using spatula again to get exact 1gm (2nd time)...', 'processing');
    console.log('🔧 About to call spoonput() second time for solution 4, m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 20→21
      console.log('✅ Solution 4: Second spatula use, m =', m);
    }
  }, 74000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚗️ Solution 4/5: Step 6 - Pouring 1gm charcoal into acetic acid solution...', 'processing');
    console.log('🔧 About to call bowlput() to pour solution 4, m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 21→22
      console.log('✅ Solution 4: Charcoal poured into solution, m =', m);
    }
  }, 79000);
  
  // SOLUTION 5 - Complete weighing cycle (m: 22→23→24→25→26→27) - FINAL
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('📦 Solution 5/5: Step 2 - Placing empty Petri dish on scale (FINAL)...', 'processing');
    console.log('🔧 About to call bowlput() for solution 5 (FINAL), m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 22→23
      console.log('✅ Solution 5: Empty petri dish placed, m =', m);
    }
  }, 84000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚖️ Solution 5/5: Step 3 - Clicking tare button to zero the scale (FINAL)...', 'processing');
    console.log('🔧 About to call tarebutton() for solution 5 (FINAL), m =', m);
    if (typeof tarebutton === 'function') {
      tarebutton(); // m: 23→24
      console.log('✅ Solution 5: Tare button clicked, m =', m);
    }
  }, 86500);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 5/5: Step 4 - Using spatula to collect charcoal (1st time - FINAL)...', 'processing');
    console.log('🔧 About to call spoonput() first time for solution 5 (FINAL), m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 24→25
      console.log('✅ Solution 5: First spatula use, m =', m);
    }
  }, 89000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🥄 Solution 5/5: Step 5 - Using spatula again to get exact 1gm (2nd time - FINAL)...', 'processing');
    console.log('🔧 About to call spoonput() second time for solution 5 (FINAL), m =', m);
    if (typeof spoonput === 'function') {
      spoonput(); // m: 25→26
      console.log('✅ Solution 5: Second spatula use, m =', m);
    }
  }, 94000);
  
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚗️ Solution 5/5: Step 6 - Pouring final 1gm charcoal into acetic acid solution...', 'processing');
    console.log('🔧 About to call bowlput() to pour solution 5 (FINAL), m =', m);
    if (typeof bowlput === 'function') {
      bowlput(); // m: 26→27, also triggers pag=6 automatically
      console.log('✅ Solution 5: Final charcoal poured, m =', m);
    }
  }, 99000);
  
  // Show completion and auto-transition to magnetic stirring
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🎉 All 5 charcoal portions weighed and added successfully!', 'success');
    console.log('✅ All weighing cycles completed, transitioning to magnetic stirring');
    console.log('📊 Final weighing state: m =', m, 'pag =', pag);
    
    // Force transition to magnetic stirring
    setTimeout(() => {
      if (!isAutoRunning) return;
      showAutoStatus('🔄 Transitioning to magnetic stirring setup...', 'info');
      console.log('🔄 Starting transition to magnetic stirring automation');
      
      // Ensure proper page setting for magnetic stirring
      if (pag !== 6) {
        console.log('� Force setting page to 6 for magnetic stirring');
        pag = 6;
        if (typeof nextpage === 'function') {
          nextpage();
        }
      }
      
      // Start magnetic stirring automation with additional delay for page transition
      setTimeout(() => {
        if (!isAutoRunning) return;
        console.log('🌀 Initiating magnetic stirring automation...');
        automateMagneticStirring();
      }, 3000);
      
    }, 2000);
  }, 103000);
}

// Enhanced magnetic stirring automation with detailed animations
function automateMagneticStirring() {
  if (!isAutoRunning) return;
  
  console.log('🔧 Starting automated magnetic stirring process');
  showAutoStatus('🌀 Setting up magnetic stirring system...', 'processing');
  
  // Ensure we're on the correct page for magnetic stirring
  setTimeout(() => {
    if (pag !== 6) {
      console.log('📄 Setting page to 6 for magnetic stirring');
      pag = 6;
      if (typeof nextpage === 'function') {
        nextpage();
      }
    }
    console.log('📄 Current page for magnetic stirring: pag =', pag);
  }, 1000);
  
  // Initialize magnetic stirring variables
  if (typeof u === 'undefined') {
    window.u = 0;
  } else {
    u = 0;
  }
  
  // Step 1: Turn on main switch
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚡ Step 1: Turning on main switch...', 'processing');
    console.log('🔧 About to call mainon()');
    if (typeof mainon === 'function') {
      mainon();
      console.log('✅ Main switch turned on');
    }
  }, 3000);
  
  // Step 2: Turn on magnetic machine power button
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🔌 Step 2: Turning on magnetic machine power button...', 'processing');
    console.log('🔧 About to call machon()');
    if (typeof machon === 'function') {
      machon();
      console.log('✅ Magnetic machine power button turned on');
    }
  }, 5000);
  
  // Step 3-7: Place conical flasks sequentially
  const flaskFunctions = [
    { func: black1, name: 'black1' },
    { func: black2, name: 'black2' },
    { func: black3, name: 'black3' },
    { func: black4, name: 'black4' },
    { func: black5, name: 'black5' }
  ];
  
  flaskFunctions.forEach((flask, index) => {
    setTimeout(() => {
      if (!isAutoRunning) return;
      showAutoStatus(`🧪 Step ${index + 3}: Placing conical flask ${index + 1} with charcoal solution...`, 'processing');
      console.log(`🔧 About to call ${flask.name}() for flask ${index + 1}`);
      if (typeof flask.func === 'function') {
        flask.func();
        console.log(`✅ Conical flask ${index + 1} placed on magnetic stirrer`);
      }
    }, 7000 + (index * 2000)); // 2 seconds between each flask
  });
  
  // Step 8: Place magnetic stirrer bar
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🧲 Step 8: Placing magnetic stirrer bar in solutions...', 'processing');
    console.log('🔧 About to call putmeg()');
    if (typeof putmeg === 'function') {
      putmeg();
      console.log('✅ Magnetic stirrer bar placed');
    }
  }, 18000);
  
  // Step 9: Set temperature with heat switch
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('🌡️ Step 9: Setting temperature with heat switch...', 'processing');
    console.log('🔧 About to call nobhon()');
    if (typeof nobhon === 'function') {
      nobhon();
      console.log('✅ Temperature set for optimal mixing');
    }
  }, 20000);
  
  // Step 10: Set mixing speed
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('⚡ Step 10: Setting speed switch for mixing the solutions...', 'processing');
    console.log('🔧 About to call nobson()');
    if (typeof nobson === 'function') {
      nobson();
      console.log('✅ Mixing speed set - solutions are now stirring');
    }
  }, 22000);
  
  // Show completion and move to next step
  setTimeout(() => {
    if (!isAutoRunning) return;
    showAutoStatus('✅ Magnetic stirring complete! Acetic acid and charcoal solutions are ready and well-mixed!', 'success');
    console.log('✅ Magnetic stirring completed, moving to filtration');
    
    // Automatically move to filtration step
    setTimeout(() => {
      if (!isAutoRunning) return;
      showAutoStatus('🔄 Moving to filtration process...', 'info');
      console.log('📄 Setting page to 7 for filtration');
      pag = 7;
      if (typeof nextpage === 'function') {
        nextpage();
        console.log('🔄 Moved to filtration step, pag =', pag);
      }
      
      // Start filtration automation
      setTimeout(() => {
        if (!isAutoRunning) return;
        automateFilterSolutions();
      }, 2000);
      
    }, 3000);
  }, 26000);
}

// Enhanced filtration automation with detailed animations
function automateFilterSolutions() {
  if (!isAutoRunning) return;
  
  console.log('🔧 Starting automated filtration process');
  showAutoStatus('🔽 Starting filtration of charcoal solutions...', 'processing');
  
  // Initialize filtration variables
  if (typeof uk === 'undefined') {
    window.uk = 0;
  } else {
    uk = 0;
  }
  
  // Filter K1-K5 solutions with enhanced messaging
  const filterFunctions = [
    { flask: bflask1, acetic: aceticflask1, name: 'K1' },
    { flask: bflask2, acetic: aceticflask2, name: 'K2' },
    { flask: bflask3, acetic: aceticflask3, name: 'K3' },
    { flask: bflask4, acetic: aceticflask4, name: 'K4' },
    { flask: bflask5, acetic: aceticflask5, name: 'K5' }
  ];
  
  filterFunctions.forEach((filter, index) => {
    const baseDelay = 2000 + (index * 7000); // 7 seconds per filtration cycle
    
    // Filter the charcoal solution
    setTimeout(() => {
      showAutoStatus(`🧪 Filtering ${filter.name} charcoal solution through filter paper...`, 'processing');
      if (typeof filter.flask === 'function') {
        filter.flask();
        console.log(`✅ ${filter.name} charcoal solution filtered`);
      }
    }, baseDelay);
    
    // Collect filtered acetic acid solution
    setTimeout(() => {
      showAutoStatus(`⚗️ Collecting clear filtered acetic acid solution from ${filter.name}...`, 'processing');
      if (typeof filter.acetic === 'function') {
        filter.acetic();
        console.log(`✅ Filtered acetic acid collected from ${filter.name}`);
      }
    }, baseDelay + 3500);
  });
  
  // Move to final titrations after all filtrations
  setTimeout(() => {
    showAutoStatus('✅ All charcoal solutions filtered and clean acetic acid collected!', 'success');
    console.log('✅ Filtration completed, moving to final titrations');
    
    // Automatically move to final titrations
    setTimeout(() => {
      showAutoStatus('🔄 Moving to final titration analysis...', 'info');
      pag = 8;
      if (typeof nextpage === 'function') {
        nextpage();
        console.log('🔄 Moved to final titration step');
      }
      
      // Start final titrations automation
      setTimeout(() => {
        automateFinalTitrations();
      }, 2000);
      
    }, 3000);
  }, 37000); // After all 5 filtrations (5 * 7000 + buffer)
}

// Enhanced final titrations automation with completion flow
function automateFinalTitrations() {
  if (!isAutoRunning) return;
  
  console.log('🔧 Starting automated final titrations');
  showAutoStatus('🧪 Performing final titrations (K1-K5) with filtered solutions...', 'processing');
  
  // Initialize final titration variables
  if (typeof v === 'undefined') {
    window.v = 0;
  } else {
    v = 0;
  }
  
  // K1 Titration - Complete sequence
  setTimeout(() => {
    showAutoStatus('🧪 K1 Titration: Selecting K1 conical flask...', 'processing');
    if (typeof ti111 === 'function') {
      ti111();
      console.log('✅ K1 flask selected');
    }
  }, 2000);
  
  setTimeout(() => {
    showAutoStatus('💧 K1 Titration: Adding NaOH drops until solution turns pink...', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // First drop
    }
  }, 5000);
  
  setTimeout(() => {
    showAutoStatus('🌸 K1 Titration: Solution turning pink - endpoint reached!', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // Second drop - turns pink
    }
  }, 8000);
  
  setTimeout(() => {
    showAutoStatus('📝 K1 Titration: Recording results and moving pink flask back...', 'processing');
    if (typeof pi111 === 'function') {
      pi111();
      console.log('✅ K1 pink flask moved back, results recorded');
    }
  }, 11000);
  
  // K2 Titration - Complete sequence
  setTimeout(() => {
    showAutoStatus('🧪 K2 Titration: Selecting K2 conical flask...', 'processing');
    if (typeof ti222 === 'function') {
      ti222();
      console.log('✅ K2 flask selected');
    }
  }, 14000);
  
  setTimeout(() => {
    showAutoStatus('💧 K2 Titration: Adding NaOH drops until solution turns pink...', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // First drop
    }
  }, 17000);
  
  setTimeout(() => {
    showAutoStatus('🌸 K2 Titration: Solution turning pink - endpoint reached!', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // Second drop - turns pink
    }
  }, 20000);
  
  setTimeout(() => {
    showAutoStatus('📝 K2 Titration: Recording results and moving pink flask back...', 'processing');
    if (typeof pi222 === 'function') {
      pi222();
      console.log('✅ K2 pink flask moved back, results recorded');
    }
  }, 23000);
  
  // K3 Titration - Complete sequence
  setTimeout(() => {
    showAutoStatus('🧪 K3 Titration: Selecting K3 conical flask...', 'processing');
    if (typeof ti333 === 'function') {
      ti333();
      console.log('✅ K3 flask selected');
    }
  }, 26000);
  
  setTimeout(() => {
    showAutoStatus('💧 K3 Titration: Adding NaOH drops until solution turns pink...', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // First drop
    }
  }, 29000);
  
  setTimeout(() => {
    showAutoStatus('🌸 K3 Titration: Solution turning pink - endpoint reached!', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // Second drop - turns pink
    }
  }, 32000);
  
  setTimeout(() => {
    showAutoStatus('📝 K3 Titration: Recording results and moving pink flask back...', 'processing');
    if (typeof pi333 === 'function') {
      pi333();
      console.log('✅ K3 pink flask moved back, results recorded');
    }
  }, 35000);
  
  // K4 Titration - Complete sequence
  setTimeout(() => {
    showAutoStatus('🧪 K4 Titration: Selecting K4 conical flask...', 'processing');
    if (typeof ti444 === 'function') {
      ti444();
      console.log('✅ K4 flask selected');
    }
  }, 38000);
  
  setTimeout(() => {
    showAutoStatus('💧 K4 Titration: Adding NaOH drops until solution turns pink...', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // First drop
    }
  }, 41000);
  
  setTimeout(() => {
    showAutoStatus('🌸 K4 Titration: Solution turning pink - endpoint reached!', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // Second drop - turns pink
    }
  }, 44000);
  
  setTimeout(() => {
    showAutoStatus('📝 K4 Titration: Recording results and moving pink flask back...', 'processing');
    if (typeof pi444 === 'function') {
      pi444();
      console.log('✅ K4 pink flask moved back, results recorded');
    }
  }, 47000);
  
  // K5 Titration - Complete sequence
  setTimeout(() => {
    showAutoStatus('🧪 K5 Titration: Selecting K5 conical flask (final solution)...', 'processing');
    if (typeof ti555v === 'function') {
      ti555v();
      console.log('✅ K5 flask selected');
    }
  }, 50000);
  
  setTimeout(() => {
    showAutoStatus('💧 K5 Titration: Adding NaOH drops until solution turns pink...', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // First drop
    }
  }, 53000);
  
  setTimeout(() => {
    showAutoStatus('🌸 K5 Titration: Final solution turning pink - experiment nearly complete!', 'processing');
    if (typeof titrate3rd === 'function') {
      titrate3rd(); // Second drop - turns pink
    }
  }, 56000);
  
  setTimeout(() => {
    showAutoStatus('📝 K5 Titration: Recording final results...', 'processing');
    if (typeof pi555 === 'function') {
      pi555();
      console.log('✅ K5 pink flask moved back, final results recorded');
    }
  }, 59000);
  
  // Complete the experiment with enhanced completion flow
  setTimeout(() => {
    showAutoStatus('✅ All final titrations (K1-K5) completed successfully!', 'success');
    console.log('✅ Final titrations completed, moving to results');
    
    // Move to results page
    setTimeout(() => {
      showAutoStatus('🔄 Moving to final results and analysis page...', 'info');
      pag = 9;
      if (typeof nextpage === 'function') {
        nextpage();
        console.log('🔄 Moved to results page');
      }
    }, 2000);
    
    // Show enhanced completion sequence
    setTimeout(() => {
      showAutoStatus('📊 Analyzing tables and calculating final values...', 'info');
      showAllResults();
      
      setTimeout(() => {
        showAutoStatus('� Filling final titration table with calculated values...', 'info');
        
        setTimeout(() => {
          showAutoStatus('✅ Values filled successfully! Checking final answer...', 'success');
          
          setTimeout(() => {
            showAutoStatus('🎉 Congratulations! Your practical has been completely successful!', 'success');
            console.log('🎉 Complete experiment automation finished successfully');
            
            // Show final success message
            setTimeout(() => {
              showAutoStatus('🏆 All values are filled and practical is completely successful! 🏆', 'success');
              
              // Auto-stop after showing success for a while
              setTimeout(() => {
                stopAutoSimulation();
              }, 8000);
            }, 3000);
          }, 4000);
        }, 4000);
      }, 3000);
    }, 4000);
  }, 62000);
}

// ============================================================================
// UPDATED EXECUTION SEQUENCE WITH ENHANCED FUNCTIONS
// ============================================================================

function executeInstructionSequence() {
  if (!isAutoRunning) return;
  
  // Use the existing message array as our instruction guide
  const totalInstructions = message.length;
  
  console.log(`📋 Starting enhanced automation with ${totalInstructions} instructions`);
  
  // Enhanced phase-based execution following the instruction messages
  const enhancedPhases = [
    // Phase 1: Equipment Familiarization (messages 0)
    { 
      startIndex: 0, 
      endIndex: 0, 
      delay: 2000, 
      action: () => familiarizeWithEquipment(),
      message: "Familiarizing with laboratory equipment..."
    },
    
    // Phase 2: Oxalic Acid Solution Preparation (messages 1-7)
    { 
      startIndex: 1, 
      endIndex: 7, 
      delay: 20000, 
      action: () => prepareOxalicAcidSolutions(),
      message: "Preparing 3 separate oxalic acid solutions..."
    },
    
    // Phase 3: Phenolphthalein Addition (messages 8-11)
    { 
      startIndex: 8, 
      endIndex: 11, 
      delay: 50000, 
      action: () => addPhenolphthaleinToOxalic(),
      message: "Adding phenolphthalein indicator to oxalic acid..."
    },
    
    // Phase 4: S1, S2, S3 Titrations (messages 12-21)
    { 
      startIndex: 12, 
      endIndex: 21, 
      delay: 70000, 
      action: () => performStandardTitrations(),
      message: "Performing standard titrations (S1, S2, S3)..."
    },
    
    // Phase 5: Acetic Acid Preparation (messages 22-27)
    { 
      startIndex: 22, 
      endIndex: 27, 
      delay: 125000,
      action: () => prepareAceticAcidSolutions(),
      message: "Step 5: Preparing acetic acid stock solutions..."
    },
    
    // Phase 6: Acetic Acid Titrations (messages 28-46) - AUTO-TRIGGERS WEIGHING
    { 
      startIndex: 28, 
      endIndex: 46, 
      delay: 155000,
      action: () => performAceticAcidTitrations(),
      message: "Step 6: Performing acetic acid titrations (U1-U5) - Auto-triggers weighing..."
    }
    
    // NOTE: Phases 7-10 are now automatically triggered by the completion of Phase 6
    // Phase 7: Enhanced Charcoal Weighing - AUTO-TRIGGERED
    // Phase 8: Enhanced Magnetic Stirring - AUTO-TRIGGERED  
    // Phase 9: Enhanced Filtration - AUTO-TRIGGERED
    // Phase 10: Enhanced Final Titrations and Results - AUTO-TRIGGERED
  ];
  
  // Execute each enhanced phase
  enhancedPhases.forEach((phase, index) => {
    const timeout = setTimeout(() => {
      if (!isAutoRunning) return;
      
      showAutoStatus(`Phase ${index + 1}/6: ${phase.message}`, 'processing');
      console.log(`🔄 Enhanced Phase ${index + 1}: ${phase.message}`);
      
      try {
        phase.action();
      } catch (error) {
        console.error(`❌ Error in enhanced phase ${index + 1}:`, error);
      }
    }, phase.delay);
    
    autoTimeouts.push(timeout);
  });
  
  // Note: Final completion is now handled by the automatic flow
  // The automation will complete automatically after all steps finish
}